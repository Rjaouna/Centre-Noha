<!-- ============================= -->
<!-- ðŸŒŸ STYLE GLOBAL DU DASHBOARD -->
<!-- ============================= -->
	<style>
	/* ===============================
   ðŸ§Š EMPTY STATE RDV
=============================== */
	/* ===============================
   ðŸ“… RDV â€“ DESIGN PRO
=============================== */

	/* Carte RDV */
	.rdv-ux-card {
		background: #ffffff;
		border-radius: 18px;
		padding: 18px 20px;
		box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
		border-left: 5px solid #0d6efd;
		transition: 0.25s ease;
		height: 100%;
		position: relative;
	}

	.rdv-ux-card:hover {
		transform: translateY(-4px);
		background: #f6f9ff;
	}

	/* RDV expirÃ© */
	.rdv-expired {
		border-left-color: #dc3545;
		background: #fff5f5;
	}

	/* Date bloc */
	.rdv-date {
		font-size: 0.8rem;
		font-weight: 800;
		text-transform: uppercase;
		letter-spacing: 0.04em;
		color: #0d6efd;
	}

	.rdv-expired .rdv-date {
		color: #ffffffff;
	}

	/* Nom patient */
	.rdv-name {
		font-weight: 700;
		font-size: 1rem;
		margin-top: 6px;
		color: #212529;
	}

	/* Heure */
	.rdv-time {
		font-size: 0.9rem;
		color: #6c757d;
		margin-top: 2px;
	}

	/* Badge */
	.rdv-status {
		margin-top: 10px;
	}

	/* Bouton */
	.rdv-action-btn {
		margin-top: 14px;
	}

	/* ===============================
   ðŸš« EMPTY STATE
=============================== */
	.rdv-empty-state {
		text-align: center;
		padding: 50px 20px;
	}

	.rdv-empty-icon {
		width: 80px;
		height: 80px;
		border-radius: 22px;
		background: linear-gradient(135deg, #0d6efd, #4dabf7);
		color: #fff;
		font-size: 2.2rem;
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0 auto 20px;
		box-shadow: 0 12px 30px rgba(13, 110, 253, 0.35);
	}



.rdv-empty-state {
    background: linear-gradient(135deg, #f8faff, #eef3ff);
    border-radius: 22px;
    padding: 40px;
    text-align: center;
    box-shadow: 0 12px 30px rgba(13,110,253,0.15);
}

.rdv-empty-icon {
    width: 72px;
    height: 72px;
    border-radius: 20px;
    background: linear-gradient(135deg, #0d6efd, #4dabf7);
    color: #fff;
    font-size: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    box-shadow: 0 10px 25px rgba(13,110,253,0.35);
}

/* ===============================
   ðŸ“… RDV CARD UX
=============================== */
.rdv-ux-card {
    background: #ffffff;
    border-radius: 18px;
    padding: 18px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    border-left: 4px solid #0d6efd;
    transition: .25s;
    height: 100%;
}

.rdv-ux-card:hover {
    transform: translateY(-4px);
    background: #f6f9ff;
}

.rdv-expired {
    border-left-color: #dc3545;
    background: #fff5f5;
}

.rdv-date {
    font-weight: 800;
    color: #0d6efd;
    text-transform: uppercase;
    font-size: .85rem;
}

.rdv-name {
    font-weight: 700;
    color: #212529;
}

.rdv-time {
    font-size: .9rem;
    color: #6c757d;
}
	.rdv-ux-card {
    background: #ffffff;
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 8px 18px rgba(0,0,0,0.08);
    transition: .25s;
    height: 100%;
}

.rdv-ux-card:hover {
    transform: translateY(-4px);
}

.rdv-expired {
    background: #fff5f5;
    border-left: 4px solid #dc3545;
}

.rdv-date {
    background: #0d6efd;
    color: #fff;
    font-weight: 700;
    font-size: .85rem;
    display: inline-block;
    padding: 6px 12px;
    border-radius: 999px;
}

.rdv-name {
    font-weight: 700;
    color: #0d6efd;
    margin-top: 6px;
}

.rdv-time {
    font-size: .9rem;
    color: #6c757d;
}

/* Card RDV compacte */
.rdv-mini {
	background: #ffffff;
	border-left: 4px solid #0d6efd;
	border-radius: 12px;
	padding: 12px;
	box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);
	transition: 0.25s;
	height: 100%;
}

.rdv-mini:hover {
	background: #f5f8ff;
	transform: translateY(-4px);
}

/* Nom */
.rdv-mini strong {
	font-size: 0.95rem;
	color: #0d6efd;
}

/* Badge Ã©tat */
.rdv-mini .badge {
	font-size: 0.70rem;
}

/* Graph Box Style */
.chart-box {
	background: #fff;
	border-radius: 18px;
	padding: 20px;
	box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
	border: 1px solid #ececec;
}

.chart-title {
	font-weight: 700;
	color: #0d6efd;
	margin-bottom: 12px;
}
/* ---------- HEADER ---------- */
.dashboard-hero {
	background: linear-gradient(135deg, #257cfd, #0dcaf0);


	border-radius: 22px;
	padding: 40px;
	color: white;
	display: flex;
	justify-content: space-between;
	align-items: center;
	flex-wrap: wrap;
	box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

.dashboard-hero img {
	width: 180px;
	object-fit: cover;
	border-radius: 20px;
	border: 4px solid rgba(255, 255, 255, 0.5);
	box-shadow: 0 8px 15px rgba(0, 0, 0, 0.25);
}


/* ---------- CARDS ---------- */
.dashboard-card {
	background: white;
	border-radius: 18px;
	padding: 25px;
	box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
	border: 1px solid #ececec;
}

/* ---------- GRAPHIQUES ---------- */
.chart-container {
	height: 200px;
	display: flex;
	justify-content: center;
	align-items: center;
}

.legend-dots {
	display: flex;
	justify-content: center;
	gap: 8px;
	flex-wrap: wrap;
}

.legend-color {
	width: 12px;
	height: 12px;
	border-radius: 50%;
}

/* ---------- RDV DESIGN ---------- */
.rdv-item {
	background: #f8faff;
	border-radius: 14px;
	padding: 15px 18px;
	border: 1px solid #e2e6f0;
	display: flex;
	justify-content: space-between;
	align-items: center;
	transition: 0.3s ease;
}

.rdv-item:hover {
	background: #eef3ff;
	transform: translateY(-2px);
}

.btn-rdv-valid {
	background: #28a745;
	border: none;
	padding: 7px 12px;
	border-radius: 40px;
	color: white;
	transition: 0.3s ease;
}

.btn-rdv-valid:hover {
	background: #218838;
}

.btn-rdv-valid:disabled {
	background: #adb5bd !important;
}

.validated-animation {
	animation: pulseCheck 0.4s ease;
}

@keyframes pulseCheck {
	0% {
		transform: scale(1);
	}
	50% {
		transform: scale(1.15);
	}
	100% {
		transform: scale(1);
	}
}
/* ===============================
   ðŸ“Š ANALYTICS CARD
=============================== */

.analytics-card {
    background: #ffffff;
    border-radius: 18px;
    padding: 18px;
    box-shadow: 0 8px 18px rgba(0,0,0,0.08);
    height: 100%;
    transition: .25s;
}

.analytics-card:hover {
    transform: translateY(-4px);
}

/* Header du graphe */
.analytics-header {
    display: flex;
    gap: 12px;
    align-items: flex-start;
    margin-bottom: 14px;
}

.analytics-header i {
    font-size: 1.4rem;
    color: #0d6efd;
}

.analytics-header strong {
    display: block;
    font-size: 0.95rem;
    color: #212529;
}

.analytics-header span {
    font-size: 0.8rem;
    color: #6c757d;
}

/* Zone graphe */
.analytics-chart {
    height: 220px;
    display: flex;
    align-items: center;
}

</style>




<!-- ============================= -->
<!-- ðŸ“… PROCHAINS RENDEZ-VOUS -->
<!-- ============================= -->
	<div
	class="mt-5"> <!-- TITRE -->
	<div class="d-flex align-items-center justify-content-between mb-4">
		<h4 class="fw-bold text-primary mb-0">
			<i class="bi bi-calendar-check me-2"></i>
Prochains RDV

		</h4>

<a href="/rendezvous/calendrier" class="btn btn-outline-primary rounded-pill btn-sm">


			<i class="bi bi-calendar-event me-1"></i>
			Calendrier
		</a>
	</div>

	<!-- CONTENEUR RDV -->
	<div class="card border-0 shadow-sm rounded-4">
		<div
			class="card-body p-4">

			<!-- LISTE RDV (injectÃ©e en JS) -->
			<div class="row g-4" id="rdvList"></div>

		</div>
	</div>

</div>



<!-- ============================= -->
<!-- ðŸ§° MODULES DE RÃ‰FÃ‰RENCE -->
<!-- ============================= -->
	<div class="mt-5 ref-section"> <div class="d-flex align-items-center justify-content-between mb-4">
		<div>
			<h4 class="fw-bold mb-1 text-primary d-flex align-items-center">
				<span class="ref-icon me-2">
					<i class="bi bi-ui-checks-grid"></i>
				</span>
				Modules de rÃ©fÃ©rence
			</h4>
			<p class="text-muted mb-0 small">
				Outils de consultation et de recherche utilisÃ©s dans la pratique quotidienne
			</p>
		</div>
	</div>

	<div class="row g-4">

		{% include 'home/_resources/_resource_card.html.twig' with {
			icon: 'bi-hospital',
			color: 'text-primary',
			title: 'Ã‰tablissements',
			subtitle: 'Localiser et consulter les structures',
			link: path('hopital_search_page')
		} %}

		{% include 'home/_resources/_resource_card.html.twig' with {
			icon: 'bi-capsule-pill',
			color: 'text-danger',
			title: 'MÃ©dicaments',
			subtitle: 'Consulter les donnÃ©es CNOPS â€“ ANAM',
			link: path('medicine_index')
		} %}

		{% include 'home/_resources/_resource_card.html.twig' with {
			icon: 'bi-heart-pulse',
			color: 'text-success',
			title: 'Dispositifs',
			subtitle: 'AccÃ©der aux dispositifs remboursables',
			link: path('dispositif_search')
		} %}

	</div>
</div>

<style>
	/* =========================
   SECTION STYLE "APP"
========================= */
	.ref-section {
		position: relative;
		padding: 18px;
		border-radius: 22px;
		background: #fff;
		border: 1px solid rgba(0, 0, 0, .06);
		box-shadow: 0 14px 40px rgba(0, 0, 0, .08);
	}

	.ref-section::before {
		content: "";
		position: absolute;
		inset: 0;
		border-radius: 22px;
		background: radial-gradient(700px 240px at 10% 0%, rgba(13,110,253,.10), transparent 60%), radial-gradient(700px 240px at 90% 0%, rgba(25, 135, 84, 0.08), transparent 60%);
		pointer-events: none;
	}

	/* petit badge icÃ´ne Ã  gauche du titre */
	.ref-icon {
		width: 38px;
		height: 38px;
		border-radius: 14px;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		background: rgba(13, 110, 253, .10);
		border: 1px solid rgba(13, 110, 253, .16);
		color: #0d6efd;
	}

</style>

<style>
	/* =========================
   ANALYTICS SECTION
========================= */
	.analytics-section {
		position: relative;
		padding: 18px;
		border-radius: 22px;
		background: #fff;
		border: 1px solid rgba(0, 0, 0, .06);
		box-shadow: 0 14px 40px rgba(0, 0, 0, .08);
	}
	.analytics-section::before {
		content: "";
		position: absolute;
		inset: 0;
		border-radius: 22px;
		background: radial-gradient(700px 240px at 12% 0%, rgba(13,110,253,.10), transparent 60%), radial-gradient(700px 240px at 88% 0%, rgba(220, 53, 69, 0.08), transparent 60%);
		pointer-events: none;
	}

	/* =========================
   ANALYTICS CARD
========================= */
	.analytics-card {
		position: relative;
		border-radius: 22px;
		background: #fff;
		border: 1px solid rgba(0, 0, 0, .06);
		box-shadow: 0 12px 30px rgba(0, 0, 0, .08);
		padding: 16px;
		transition: 0.18s ease;
		overflow: hidden;
		min-height: 260px;
	}

	.analytics-card:hover {
		transform: translateY(-6px);
		box-shadow: 0 22px 48px rgba(0, 0, 0, .12);
	}

	/* dÃ©cor lÃ©ger derriÃ¨re */
	.analytics-card::before {
		content: "";
		position: absolute;
		inset: -1px;
		border-radius: 22px;
		background: radial-gradient(320px 160px at 10% 0%, rgba(13,110,253,.09), transparent 60%), radial-gradient(320px 160px at 90% 0%, rgba(25, 135, 84, 0.07), transparent 60%);
		pointer-events: none;
	}

	/* =========================
   HEADER CARD
========================= */
	.analytics-header {
		display: flex;
		align-items: center;
		gap: 12px;
		padding: 10px 10px 12px;
		border-radius: 18px;
		background: rgba(0, 0, 0, .02);
		border: 1px solid rgba(0, 0, 0, .05);
		position: relative;
		z-index: 1;
	}

	.analytics-header i {
		width: 46px;
		height: 46px;
		border-radius: 16px;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		font-size: 1.35rem;
		background: rgba(13, 110, 253, .10);
		border: 1px solid rgba(13, 110, 253, .16);
		color: #0d6efd;
		flex: 0 0 auto;
	}

	.analytics-header strong {
		display: block;
		font-weight: 900;
		color: #111827;
		line-height: 1.15;
	}
	.analytics-header span {
		display: block;
		font-size: 0.85rem;
		color: #6b7280;
		margin-top: 2px;
		font-weight: 500;
	}

	/* =========================
   CHART ZONE
========================= */
	.analytics-chart {
		margin-top: 12px;
		border-radius: 18px;
		background: #fff;
		border: 1px solid rgba(0, 0, 0, .06);
		box-shadow: inset 0 0 0 1px rgba(255, 255, 255, .5);
		padding: 10px;
		position: relative;
		z-index: 1;
		min-height: 170px;

		display: flex;
		align-items: center;
		justify-content: center;
	}

	.analytics-chart canvas {
		max-height: 170px !important;
		width: 100% !important;
	}

	/* =========================
   ICON VARIANTS by column order
   (sans toucher ton HTML)
========================= */
	.row.g-4 .col-12.col-lg-3:nth-child(1) .analytics-header i {
		background: rgba(25, 135, 84, .10);
		border-color: rgba(25, 135, 84, .16);
		color: #198754;
	}
	.row.g-4 .col-12.col-lg-3:nth-child(2) .analytics-header i {
		background: rgba(220, 53, 69, .10);
		border-color: rgba(220, 53, 69, .16);
		color: #dc3545;
	}
	.row.g-4 .col-12.col-lg-3:nth-child(3) .analytics-header i {
		background: rgba(255, 193, 7, .16);
		border-color: rgba(255, 193, 7, .22);
		color: #b58100;
	}
	.row.g-4 .col-12.col-lg-3:nth-child(4) .analytics-header i {
		background: rgba(13, 110, 253, .10);
		border-color: rgba(13, 110, 253, .16);
		color: #0d6efd;
	}

	/* =========================
   MOBILE COMFORT
========================= */
	@media(max-width: 576px) {
		.analytics-card {
			padding: 14px;
		}
		.analytics-header {
			padding: 10px;
		}
		.analytics-header i {
			width: 44px;
			height: 44px;
			border-radius: 15px;
		}
	}
</style>



<!-- ===== ANALYTICS GRAPHS ===== -->
<div class="mt-5">
	<div class="d-flex align-items-center justify-content-between mb-4">
		<div>
			<h4 class="fw-bold mb-1 text-primary">
				<i class="bi bi-graph-up me-2"></i>
				Indicateurs statistiques
			</h4>
			<p class="text-muted mb-0 small">
				Analyse et visualisation de lâ€™activitÃ© Ã  partir des donnÃ©es enregistrÃ©es
			</p>
		</div>
	</div>
</div>


<div
	class="row g-4 mt-4">

	<!-- ðŸ’³ PAIEMENTS -->
	<div class="col-12 col-lg-3">
		<div class="analytics-card">
			<div class="analytics-header">
				<i class="bi bi-cash-coin"></i>
				<div>
					<strong>Modes de paiement</strong>
					<span>RÃ©partition des paiements enregistrÃ©s</span>
				</div>
			</div>

			<div class="analytics-chart">
				<canvas id="chartPaiements"></canvas>
			</div>
		</div>
	</div>

	<!-- â¤ï¸ MALADIES -->
	<div class="col-12 col-lg-3">
		<div class="analytics-card">
			<div class="analytics-header">
				<i class="bi bi-heart-pulse"></i>
				<div>
					<strong>Types de maladies</strong>
					<span>Distribution des pathologies observÃ©es</span>
				</div>
			</div>

			<div class="analytics-chart">
				<canvas id="chartPieMaladies"></canvas>
			</div>
		</div>
	</div>

	<!-- ðŸŒ¡ï¸ SYMPTÃ”MES -->
	<div class="col-12 col-lg-3">
		<div class="analytics-card">
			<div class="analytics-header">
				<i class="bi bi-thermometer"></i>
				<div>
					<strong>SymptÃ´mes</strong>
					<span>FrÃ©quence et intensitÃ© des symptÃ´mes</span>
				</div>
			</div>

			<div class="analytics-chart">
				<canvas id="chartSymptomes"></canvas>
			</div>
		</div>
	</div>

	<!-- ðŸ“ˆ FRÃ‰QUENTATION -->
	<div class="col-12 col-lg-3">
		<div class="analytics-card">
			<div class="analytics-header">
				<i class="bi bi-graph-up"></i>
				<div>
					<strong>Clients par jour</strong>
					<span>Ã‰volution quotidienne de la frÃ©quentation</span>
				</div>
			</div>

			<div class="analytics-chart">
				<canvas id="chartClientsPerDay"></canvas>
			</div>
		</div>
	</div>

</div>



<!-- ===== GRAPHIQUES ===== -->



 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

 <script>
/* ================= GLOBAL ================= */
let charts = {};

function destroyChart(id) {
    if (charts[id]) {
        charts[id].destroy();
        delete charts[id];
    }
}

/* ================= GRAPHIQUES ================= */

// ðŸ’³ Paiements â†’ BAR HORIZONTAL
async function loadPaiementsChart() {
    const res = await fetch('/api/statistics/paiements');
    const stats = await res.json();

    destroyChart('paiements');

    charts.paiements = new Chart(document.getElementById('chartPaiements'), {
        type: 'bar',
        data: {
            labels: stats.labels,
            datasets: [{
                data: stats.values,
                backgroundColor: 'rgba(13,110,253,.8)',
                borderRadius: 12
            }]
        },
        options: {
            indexAxis: 'y',
            plugins: { legend: { display: false } },
            scales: {
                x: { grid: { display: false } },
                y: { grid: { display: false } }
            }
        }
    });
}

// â¤ï¸ Maladies â†’ DOUGHNUT Ã‰PAIS
async function loadMaladiesChart() {
    const res = await fetch("{{ path('api_statistics_maladies') }}");
    const stats = await res.json();

    destroyChart('maladies');

    charts.maladies = new Chart(document.getElementById('chartPieMaladies'), {
        type: 'doughnut',
        data: {
            labels: stats.labels,
            datasets: [{
                data: stats.values,
                backgroundColor: [
                    '#0d6efd','#20c997','#ffc107','#dc3545','#6f42c1'
                ],
                borderWidth: 0
            }]
        },
        options: {
            cutout: '70%',
            plugins: { legend: { position: 'bottom' } }
        }
    });
}

// ðŸŒ¡ï¸ SymptÃ´mes â†’ RADAR
async function loadSymptomesChart() {
    const res = await fetch("{{ path('api_statistics_symptomes') }}");
    const stats = await res.json();

    destroyChart('symptomes');

    charts.symptomes = new Chart(document.getElementById('chartSymptomes'), {
        type: 'radar',
        data: {
            labels: stats.labels,
            datasets: [{
                data: stats.values,
                backgroundColor: 'rgba(13,110,253,.2)',
                borderColor: '#0d6efd',
                pointBackgroundColor: '#0d6efd'
            }]
        },
        options: {
            plugins: { legend: { display: false } }
        }
    });
}

// ðŸ“ˆ Clients / jour â†’ LINE GRADIENT
async function loadClientsPerDayChart() {
    const res = await fetch('/api/statistics/clients-per-day');
    const stats = await res.json();

    destroyChart('clients');

    const ctx = document.getElementById('chartClientsPerDay').getContext('2d');
    const gradient = ctx.createLinearGradient(0,0,0,200);
    gradient.addColorStop(0,'rgba(13,110,253,.5)');
    gradient.addColorStop(1,'rgba(13,110,253,0)');

    charts.clients = new Chart(ctx, {
        type: 'line',
        data: {
            labels: stats.labels,
            datasets: [{
                data: stats.values,
                fill: true,
                backgroundColor: gradient,
                borderColor: '#0d6efd',
                tension: .4
            }]
        },
        options: {
            plugins: { legend: { display: false } },
            scales: {
                x: { grid: { display: false } },
                y: { grid: { display: false } }
            }
        }
    });
}


/* ================= INIT ================= */
document.addEventListener('DOMContentLoaded', () => {
    loadPaiementsChart();
    loadMaladiesChart();
    loadSymptomesChart();
    loadClientsPerDayChart();
    loadNextRDV();
});
</script>

 <script>
async function loadAllRDV() {
    const res = await fetch('/api/rendezvous/events');
    const rdvs = await res.json();
    const container = document.getElementById('rdvList');

    container.innerHTML = '';
    const now = new Date();

    // ðŸ”¹ uniquement les RDV confirmÃ©s
    const confirmes = rdvs.filter(
        rdv => rdv.extendedProps.statut === 'confirme'
    );

    /* ===============================
     * ðŸš« AUCUN RDV â†’ EMPTY STATE PRO
     * =============================== */
    if (confirmes.length === 0) {
        container.innerHTML = `
            <div class="col-12">
                <div class="rdv-empty-state">
                    <div class="rdv-empty-icon">
                        <i class="bi bi-calendar-x"></i>
                    </div>

                    <h5 class="fw-bold mt-3">
                        Aucun rendez-vous programmÃ©
                    </h5>

                    <p class="text-muted mb-4">
Vous nâ€™avez actuellement aucun rendez-vous confirmÃ©.

                    </p>

<a href="/rendezvous/calendrier" class="btn btn-primary rounded-pill px-4">


                        <i class="bi bi-calendar-event me-1"></i>
                        Voir le calendrier
                    </a>
                </div>
            </div>
        `;
        return;
    }

    /* ===============================
     * âœ… LISTE DES RDV
     * =============================== */
    confirmes.forEach(rdv => {

        const expiresAt = new Date(rdv.extendedProps.expiresAt);
        const isExpired = expiresAt < now;

        const start = new Date(rdv.start);

        const dateLabel = start.toLocaleDateString('fr-FR', {
            weekday: 'short',
            day: '2-digit',
            month: 'short'
        });

        const timeLabel = start.toLocaleTimeString('fr-FR', {
            hour: '2-digit',
            minute: '2-digit'
        });

        container.insertAdjacentHTML('beforeend', `
            <div class="col-md-6 col-lg-4">
                <div class="rdv-ux-card ${isExpired ? 'rdv-expired' : ''}">

                    <!-- DATE -->
                    <div class="rdv-date">
                        ${dateLabel}
                    </div>

                    <!-- INFOS -->
                    <div class="mt-2">
                        <div class="rdv-name">
                            <i class="bi bi-person-circle"></i>
                            ${rdv.title}
                        </div>

                        <div class="rdv-time">
                            <i class="bi bi-clock"></i>
                            ${timeLabel}
                        </div>
                    </div>

                    <!-- STATUT -->
                    <div class="mt-2">
                        ${
                            isExpired
                            ? `<span class="badge bg-danger">Rendez-vous ratÃ©</span>`
                            : `<span class="badge bg-success">Ã€ venir</span>`
                        }
                    </div>

                    <!-- ACTION -->
                    <button
                        class="btn btn-sm ${isExpired ? 'btn-danger' : 'btn-success'} w-100 mt-3"
                        onclick="validerRDV(${rdv.id})">
                        <i class="bi bi-check-circle"></i>
                        ${isExpired ? 'Archiver' : 'Valider'}
                    </button>
                </div>
            </div>
        `);
    });
}

async function validerRDV(id) {
    if (!confirm('Confirmer cette action ?')) return;
    await fetch(`/api/rendezvous/${id}/valider`, { method: 'POST' });
    loadAllRDV();
}

document.addEventListener('DOMContentLoaded', loadAllRDV);
</script>







