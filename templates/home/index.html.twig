
{% extends 'base.html.twig' %}

{% block title %}Accueil
{% endblock %}

{% block body %}

	<style>
		/* =============================
   NEW DASHBOARD BLOCK STYLE PRO
   ============================= */

	.dashboard-pro {
    padding: 24px;
    border-radius: 18px;
    position: relative;
    overflow: hidden;
    color: #fff !important;
    text-align: left !important;
    cursor: pointer;
    transition: 0.25s ease-in-out;
    min-height: 160px;
}

/* Rendu premium */
.dashboard-pro:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 24px rgba(0,0,0,0.18);
}

/* Grande ic√¥ne d√©corative */
.dashboard-pro-bigicon {
    position: absolute;
    right: -10px;
    bottom: -10px;
    font-size: 6rem;
    opacity: 0.18;
    pointer-events: none;
}

/* Badge interne */
.dashboard-pro-badge-inside {
    position: absolute;
    bottom: 12px;
    left: 15px;
    background: rgba(255,255,255,0.25);
    padding: 6px 12px;
    border-radius: 12px;
    font-weight: 700;
    font-size: 0.85rem;
    backdrop-filter: blur(4px);
    color: #fff;
}

/* Titre & texte */
.dashboard-pro h5 {
    font-size: 1.2rem;
    font-weight: 800;
    margin-bottom: 6px;
    color: #fff !important;
}

.dashboard-pro p {
    color: rgba(255,255,255,0.85) !important;
    margin-bottom: 0;
}

		/* Badge anim√© */
		.dashboard-pro-badge {
			position: absolute;
			top: -6px;
			right: -6px;
			background: #0dcaf0;
			color: white;
			font-weight: 700;
			padding: 6px 10px;
			border-radius: 50%;
			animation: pulse 2s infinite;
		}

		/* Animation du badge */
		@keyframes pulse {
			0% {
				transform: scale(1);
			}
			50% {
				transform: scale(1.12);
			}
			100% {
				transform: scale(1);
			}
		}

	</style>
	<div class="container py-4">
<div class="container my-4">


	<h4 class="fw-bold  text-left mb-4 mt-3">


		<i class="bi bi-activity text-primary me-2"></i>


		Tableau de Bord ‚Äî


		<span class="text-primary" id="nameCabinet"></span>


	</h4>


</div>


<div
	class="row g-4 justify-content-center">

	<!-- üîπ 1 ‚Äî Ajouter un patient -->
	<div class="col-12 col-md-3 ">
<a data-bs-toggle="modal" data-bs-target="#modalAddClient" class="text-decoration-none">

<div class="dashboard-pro  shadow" style="background: rgba(25,135,84,0.9);">


				<h5>Ajouter un patient</h5>
				<p>Cr√©er une nouvelle fiche patient</p>

				<i class="bi bi-person-plus-fill dashboard-pro-bigicon"></i>

			</div>
		</a>
	</div>

	<!-- üîπ 2 ‚Äî Liste des patients -->
	<div class="col-12 col-md-3">
		<a href="{{ path('app_fiche_client_index') }}" class="text-decoration-none">
<div class="dashboard-pro position-relative shadow" style="background: rgba(13,110,253,0.9);">


				<h5>Liste des patients</h5>
				<p>G√©rer et consulter tous les dossiers</p>

				{% if totalClients %}
					<span class="dashboard-pro-badge-inside">{{ totalClients }}</span>
				{% endif %}

				<i class="bi bi-people-fill dashboard-pro-bigicon"></i>

			</div>
		</a>
	</div>

	<!-- üîπ 3 ‚Äî M√©dicaments -->
	<div class="col-12 col-md-3">
		<a href="{{ path('medicine_index') }}" class="text-decoration-none">
<div class="dashboard-pro shadow" style="background: rgba(220,53,69,0.9);">


				<h5>M√©dicaments</h5>
				<p>Consultation & gestion des m√©dicaments</p>

				<i class="bi bi-capsule-pill dashboard-pro-bigicon"></i>

			</div>
		</a>
	</div>

	<!-- üîπ 4 ‚Äî Rendez-vous -->
	<div class="col-12 col-md-3">
		<a href="{{ path('app_rdv_index') }}" class="text-decoration-none">
<div class="dashboard-pro shadow position-relative" style="background: rgba(13,202,240,0.9);">


				<h5>Rendez-vous</h5>
				<p>Planning & gestion des consultations</p>

				{% if totalRdv %}
					<span class="dashboard-pro-badge-inside">{{ totalRdv }}</span>
				{% endif %}

				<i class="bi bi-calendar-week dashboard-pro-bigicon"></i>

			</div>
		</a>
	</div>

</div>




		<div class="mt-5">
			<h4 class="fw-bold mb-3">
				<i class="bi bi-ui-checks-grid text-primary me-2"></i>
				R√©f√©rentiels & Ressources
			</h4>

			<div class="row g-3">

				<a href="{{ path('hopital_search_page') }}" class="col-md-4 text-decoration-none">
					<div class="p-3 border rounded-4 shadow-sm d-flex align-items-center">
						<i class="bi bi-hospital text-primary fs-3 me-3"></i>
						<div>
							<h6 class="fw-bold mb-0">√âtablissements Hospitaliers</h6>
							<small class="text-muted">Recherche & consultation</small>
						</div>
					</div>
				</a>


				<div class="col-md-4">
					<a href="{{ path('hopital_search_page') }}" class="col-md-4 text-decoration-none">

						<div class="p-3 border rounded-4 shadow-sm d-flex align-items-center">
							<i class="bi bi-heart-pulse text-success fs-3 me-3"></i>
							<div>
								<h6 class="fw-bold mb-0">Dispositifs remboursables</h6>
								<small class="text-muted">CNOPS ‚Äì ANAM</small>
							</div>
						</div>
					</a>
				</div>

				<div class="col-md-4">
					<a href="{{ path('medicine_index') }}" class="col-md-4 text-decoration-none">


						<div class="p-3 border rounded-4 shadow-sm d-flex align-items-center">
							<i class="bi bi-capsule-pill text-danger fs-3 me-3"></i>

							<div>
								<h6 class="fw-bold mb-0">Liste des M√©dicaments</h6>

								<small class="text-muted">CNOPS ‚Äì ANAM</small>
							</div>
						</div>
					</a>


				</div>


			</div>
		</div>
		


		<!-- üìä SECTION STATISTIQUES -->
		{{ include('home/_stats/_stats.html.twig') }}


	</div>

</div>


<!-- MODAL AJOUT PATIENT -->

<div class="modal fade" id="modalAddClient" tabindex="-1">
	<div class="modal-dialog modal-xl">
		<div class="modal-content rounded-4 shadow-sm border">


			<div class="modal-header bg-primary text-white rounded-top-4">
				<h5 class="modal-title fw-bold d-flex align-items-center">
					<i class="bi bi-person-plus fs-4 me-2"></i>
					Ajouter un patient
				</h5>
				<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
			</div>

			<div class="modal-body p-4">
				{{ include('fiche_client/new.html.twig') }}


			</div>

		</div>
	</div>
</div>


 <script>
async function afficherNomCabinet() {

    const url = "{{ path('app_nom_cabinet') }}";
const urlConfig = "{{ path('app_cabinet_index') }}"; // üîß route vers la config du cabinet


    try {
        const response = await fetch(url);
        const data = await response.json();

        console.log("Nom cabinet :", data.nom);

        const element = document.getElementById('nameCabinet');
        if (!element) return; // S√©curit√©

        // Cas o√π le nom n'est pas d√©fini
        if (!data.nom || data.nom === "null") {

            element.innerHTML = `
                Veuillez configurer le nom du cabinet 
                <a href="${urlConfig}" class="btn btn-sm btn-warning ms-2">
                    Configurer
                </a>
            `;
        } 
        else {
            // Cabinet trouv√© ‚Üí affichage normal
            element.innerText = data.nom;
        }

    } catch (error) {
        console.error("Erreur :", error);
    }
}

// Ex√©cution
afficherNomCabinet();


		



</script>{% endblock %}

