{% extends 'base.html.twig' %}

{% block title %}Fiche patient â€”
	{{ fiche_client.nom }}
{% endblock %}

{% block body %}

<div class="container-fluid mt-4">

	<div class="card shadow-lg border-0 mb-4 rounded-4">
		<div
			class="card-body py-4 d-flex flex-column flex-lg-row justify-content-between align-items-lg-center gap-3">

			<!-- TITRE -->
			<div>
				<h2 class="fw-bold text-primary mb-1 d-flex align-items-center">
					<i class="bi bi-person-vcard me-2 fs-1"></i>
					Fiche patient :
					{{ fiche_client.nom }}
				</h2>
				<p class="text-muted mb-0">
					{{ fiche_client.ville }}
					â€¢
					{{ fiche_client.telephone }}
				</p>
			</div>

			<!-- BOUTONS -->
			<div class="d-flex flex-column flex-lg-row gap-2">

				<button class="btn btn-outline-info btn-lg rounded-pill px-4 shadow-sm d-flex align-items-center gap-2" data-bs-toggle="modal" data-bs-target="#modalAddRdv">
					<i class="bi bi-calendar-plus fs-4"></i>
					Donner un rendez-vous
				</button>

				<a href="#" class="btn btn-outline-primary btn-lg rounded-pill px-4 shadow-sm d-flex align-items-center gap-2" data-bs-toggle="modal" data-bs-target="#modalEditFiche">
					<i class="bi bi-pencil-square"></i>
					Modifier
				</a>

				<form method="post" action="{{ path('app_fiche_client_delete', {id: fiche_client.id}) }}" onsubmit="return confirm('Voulez-vous vraiment supprimer cette fiche ?');">
					<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ fiche_client.id) }}">
					<button class="btn btn-outline-danger btn-lg rounded-pill px-4 shadow-sm d-flex align-items-center gap-2">
						<i class="bi bi-trash"></i>
						Supprimer
					</button>
				</form>

				<a href="{{ path('app_fiche_client_index') }}" class="btn btn-outline-secondary btn-lg rounded-pill px-4 shadow-sm d-flex align-items-center gap-2">
					<i class="bi bi-arrow-left"></i>
					Retour
				</a>

			</div>

		</div>
	</div>

</div>




		{# -------------------------------------------- #}
		{# ðŸ”· SECTIONS PERSONNELLES & MEDICALES CÃ”TE Ã€ CÃ”TE #}
		{# -------------------------------------------- #}
			<div
			class="row g-4 mb-4"> {# ðŸŸ¦ INFORMATIONS PERSONNELLES #}
			<div class="col-lg-6 d-flex">
				<div class="card shadow-lg border-0 rounded-4 flex-fill h-100">
					<div class="card-body py-4 px-4">

						<h3 class="text-primary fw-bold mb-4 d-flex align-items-center">
							<i class="bi bi-person-lines-fill me-2 fs-2"></i>
							Informations personnelles
						</h3>

						<div class="row g-3">

							<div class="col-md-6">
								<div class="border-start border-3 border-primary ps-3">
									<p class="text-secondary mb-1 fw-semibold">Nom</p>
									<p class="fs-5 fw-bold">{{ fiche_client.nom }}</p>
								</div>
							</div>

							<div class="col-md-6">
								<div class="border-start border-3 border-info ps-3">
									<p class="text-secondary mb-1 fw-semibold">Ville</p>
									<p class="fs-5 fw-bold">{{ fiche_client.ville }}</p>
								</div>
							</div>

							<div class="col-md-6">
								<div class="border-start border-3 border-success ps-3">
									<p class="text-secondary mb-1 fw-semibold">TÃ©lÃ©phone</p>
									<p class="fs-5 fw-bold">{{ fiche_client.telephone }}</p>
								</div>
							</div>

							<div class="col-md-6">
								<div class="border-start border-3 border-warning ps-3">
									<p class="text-secondary mb-1 fw-semibold">Ã‚ge</p>
									<p class="fs-5 fw-bold">{{ fiche_client.age }}</p>
								</div>
							</div>

							<div class="col-md-6">
								<div class="border-start border-3 border-danger ps-3">
									<p class="text-secondary mb-1 fw-semibold">Poids</p>
									<p class="fs-5 fw-bold">{{ fiche_client.poids }}
										kg</p>
								</div>
							</div>

							<div class="col-md-6">
								<div class="border-start border-3 border-dark ps-3">
									<p class="text-secondary mb-1 fw-semibold">CrÃ©Ã© le</p>
									<p class="fs-5 fw-bold">{{ fiche_client.createdAt|date('d/m/Y H:i') }}</p>
								</div>
							</div>

							<div class="col-md-6">
								<div class="border-start border-3 border-secondary ps-3">
									<p class="text-secondary mb-1 fw-semibold">Mis Ã  jour le</p>
									<p class="fs-5 fw-bold">{{ fiche_client.updatedAt|date('d/m/Y H:i') }}</p>
								</div>
							</div>

						</div>

						{# ðŸ”µ BLOC RDV â€” INSÃ‰RÃ‰ ICI #}
						<h3 class="text-info fw-bold mb-3 d-flex align-items-center mt-4">
							<i class="bi bi-calendar-event me-2 fs-3"></i>
							Historique des rendez-vous
						</h3>

						<div class="d-flex flex-wrap gap-4 my-4">

							<div class="text-center">
								<div class="rounded-circle bg-primary text-white d-flex justify-content-center align-items-center shadow-sm rdv-circle">
									{{ rdv_total }}
								</div>
								<small class="d-block mt-2 fw-bold text-primary">Total</small>
							</div>

							<div class="text-center">
								<div class="rounded-circle bg-success text-white d-flex justify-content-center align-items-center shadow-sm rdv-circle">
									{{ rdv_future }}
								</div>
								<small class="d-block mt-2 fw-bold text-success">Ã€ venir</small>
							</div>

							<div class="text-center">
								<div class="rounded-circle bg-warning text-dark d-flex justify-content-center align-items-center shadow-sm rdv-circle">
									{{ rdv_canceled }}
								</div>
								<small class="d-block mt-2 fw-bold text-warning">AnnulÃ©s</small>
							</div>

							<div class="text-center">
								<div class="rounded-circle bg-danger text-white d-flex justify-content-center align-items-center shadow-sm rdv-circle">
									{{ rdv_past }}
								</div>
								<small class="d-block mt-2 fw-bold text-danger">PassÃ©s</small>
							</div>

						</div>

					</div>
				</div>
			</div>


			{# ðŸŸ¢ INFORMATIONS MÃ‰DICALES #}
			<div class="col-lg-6 d-flex">
				<div class="card shadow-lg border-0 rounded-4 flex-fill h-100">
					<div class="card-body py-4 px-4">

						<h3 class="text-success fw-bold mb-4 d-flex align-items-center">
							<i class="bi bi-heart-pulse-fill me-2 fs-2"></i>
							Informations mÃ©dicales
						</h3>

						<div class="row g-3">

							<div class="col-md-12">
								<div class="border-start border-3 border-success ps-3">
									<p class="text-secondary mb-1 fw-semibold">DurÃ©e de la maladie</p>
									<p class="fs-5 fw-bold">{{ fiche_client.dureeMaladie }}</p>
								</div>
							</div>

							<div class="col-md-12">
								<div class="border-start border-3 border-info ps-3">
									<p class="text-secondary mb-1 fw-semibold">Type de maladie</p>
									<p class="fs-5 fw-bold">{{ fiche_client.typeMaladie }}</p>
								</div>
							</div>

						</div>

						{# Composants mÃ©dicaux #}
						<div class="mt-4">
							{{ include('fiche_client/_composants/_trouble_digestifs.html.twig') }}
							{{ include('fiche_client/_composants/_symptomes_generaux.html.twig') }}
							{{ include('fiche_client/_composants/_maladies_chroniques.html.twig') }}
							{{ include('fiche_client/_composants/_modal_edit_client/_modal_edit_client.html.twig') }}
							{{ include('fiche_client/_composants/_modal_rdv/_modal_rdv.html.twig') }}
						</div>

					</div>
				</div>
			</div>

		</div>


		{# -------------------------------------------- #}
		{# ðŸ”¶ TRAITEMENT & OBSERVATIONS                 #}
		{# -------------------------------------------- #}
			<div class="card shadow-lg border-0 rounded-4 mb-4"> <div class="card-body py-4 px-4">

				<h3 class="text-warning fw-bold mb-4 d-flex align-items-center">
					<i class="bi bi-journal-medical me-2 fs-2"></i>
					Traitement & Observations
				</h3>

				<div class="row g-4">

					<div class="col-12">
						<p class="text-secondary mb-1 fw-semibold">Traitement</p>
						<div class="fs-5 p-3 bg-light rounded-3 shadow-sm">
							{{ fiche_client.traitement ?: 'â€”' }}
						</div>
					</div>

					<div class="col-12">
						<p class="text-secondary mb-1 fw-semibold">Observations</p>
						<div class="fs-5 p-3 bg-light rounded-3 shadow-sm">
							{{ fiche_client.observation ?: 'â€”' }}
						</div>
					</div>

				</div>

			</div>
		</div>

	</div>

	<style>
		.rdv-circle {
			width: 40px;
			height: 40px;
			font-size: 1rem;
			transition: transform 0.2s ease-in-out;
		}
		.rdv-circle:hover {
			transform: scale(1.12);
		}
	</style>

{% endblock %}

