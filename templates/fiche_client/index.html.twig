{% extends 'base.html.twig' %}

{% block title %}Liste des Patients
{% endblock %}

{% block body %}
	<div
		class="container-fluid mt-4">

		<!-- HEADER -->
		<div class="card shadow-lg border-0 mb-4">
			<div class="card-body d-flex justify-content-between align-items-center">
				<h2 class="fw-bold text-primary mb-0">ðŸ“‹ Gestion des Patients</h2>

				<!-- ðŸ”¥ BOUTON QUI OUVRE LE MODAL -->
				<button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalAddClient">
					<i class="bi bi-person-plus fs-4 me-2"></i>
					Nouveau patient
				</button>
			</div>
		</div>

		<!-- TABLE DATA -->
		<div class="card shadow border-0">
			<div class="card-header bg-primary text-white fw-bold">
				Liste des patients
			</div>

			<div class="card-body table-responsive">
				<table id="patientsTable" class="table table-striped table-hover align-middle" style="width:100%">
					<thead>
						<tr>
							<th>#</th>
							<th>Nom</th>
							<th>Ville</th>
							<th>Ã‚ge</th>
							<th>Poids</th>
							<th>TÃ©lÃ©phone</th>
							<th>DurÃ©e maladie</th>
							<th>Type maladie</th>
							<th>Traitement</th>
							<th>Observation</th>
							<th>CrÃ©Ã©</th>
							<th>ModifiÃ©</th>
							<th>Actions</th>
						</tr>
					</thead>

					<tbody>
						{% for fiche_client in fiche_clients %}
							<tr>
								<td>{{ fiche_client.id }}</td>
								<td>
									<strong>{{ fiche_client.nom }}</strong>
								</td>
								<td>{{ fiche_client.ville }}</td>
								<td>{{ fiche_client.age }}</td>
								<td>{{ fiche_client.poids }}</td>
								<td>{{ fiche_client.telephone }}</td>
								<td>{{ fiche_client.dureeMaladie }}</td>
								<td>{{ fiche_client.typeMaladie }}</td>
								<td>{{ fiche_client.traitement ?: 'â€”' }}</td>
								<td>{{ fiche_client.observation ?: 'â€”' }}</td>
								<td>{{ fiche_client.createdAt|date('d/m/Y H:i') }}</td>
								<td>{{ fiche_client.updatedAt|date('d/m/Y H:i') }}</td>
								<td>
									<a href="{{ path('app_fiche_client_show', {'id': fiche_client.id}) }}" class="btn btn-outline-primary btn-sm">
										ðŸ‘€ Voir
									</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>

				</table>
			</div>
		</div>

	</div>

	<!-- INIT DATATABLE -->
	 <script>
	    $(document).ready(function() {
	        $('#patientsTable').DataTable({
	            "pageLength": 10,
	            "language": {
	                "url": "//cdn.datatables.net/plug-ins/1.13.6/i18n/fr-FR.json"
	            },
	            "order": [[0, "desc"]],
	            responsive: true
	        });
	    });
	</script>

	<!-- ðŸ”¥ðŸ”¥ MODAL AJOUT PATIENT ðŸ”¥ðŸ”¥ -->
		<div class="modal fade" id="modalAddClient" tabindex="-1" aria-hidden="true"> <div class="modal-dialog modal-xl">
			<div class="modal-content">

				<div class="modal-header bg-primary text-white">
					<h5 class="modal-title">
						<i class="bi bi-person-plus"></i>
						Ajouter un client
					</h5>
					<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
				</div>

				<div
					class="modal-body">

					<!-- ðŸ”¥ CHARGE LE FORMULAIRE -->
					{{ include('fiche_client/new.html.twig') }}

				</div>

			</div>
		</div>
	</div>

{% endblock %}

