<div class="tab-pane fade" id="tab-symptomes" role="tabpanel">

	<div class="section-head">
		<div>
			<div class="section-kicker text-primary">Section</div>
			<h5 class="section-title mb-0">Symptômes généraux</h5>
		</div>

		<div class="d-flex gap-2">
			<button class="btn btn-outline-primary rounded-pill px-3" type="button" id="btnEdit-symptomes">
				<i class="bi bi-pencil-square me-1"></i>
				Modifier
			</button>
		</div>
	</div>

	<div class="section-card">
		<div class="fw-semibold mb-2">Résumé</div>
		<div class="chips" id="chips-symptomes"></div>
		<div class="text-muted small mt-2" id="empty-symptomes" style="display:none;">
			Aucune donnée. Clique sur “Modifier” pour compléter.
		</div>
	</div>

	<div class="edit-drawer" id="drawer-symptomes" style="display:none;">
		<form id="form-symptomes" class="edit-form">
			<div class="row g-3">
				{% set s = [
          ['mauxTete','Maux de tête','bi-emoji-dizzy', ['Jamais','Parfois','Souvent']],
          ['mauxNuque','Maux de nuque','bi-person-arms-up', ['Jamais','Parfois','Souvent']],
          ['insomnie','Insomnie','bi-moon-stars', ['Jamais',"Difficultés d’endormissement",'Réveils nocturnes','Insomnie sévère']],
          ['hemorroides','Hémorroïdes','bi-emoji-frown', ['Jamais','Occasionnelles','Fréquentes']],
          ['enuresie','Énurésie','bi-droplet-half', ['Jamais','Rare','Parfois','Souvent']]
        ] %}
				{% for f in s %}
					<div class="col-md-6">
						<div class="choice-card">
							<div class="choice-card__title">
								<i class="bi {{ f[2] }} text-primary me-1"></i>
								{{ f[1] }}
							</div>
							<div class="choice-row">
								{% for opt in f[3] %}
									{% set id = 'symptomes_' ~ f[0] ~ '_' ~ loop.index %}
									<input class="btn-check" type="radio" name="{{ f[0] }}" id="{{ id }}" value="{{ opt }}" autocomplete="off">
									<label class="btn btn-outline-primary rounded-pill px-3 py-2" for="{{ id }}">{{ opt }}</label>
								{% endfor %}
							</div>
						</div>
					</div>
				{% endfor %}
			</div>

			<div class="edit-actions">
				<button type="button" class="btn btn-light rounded-pill px-4" id="btnCancel-symptomes">Annuler</button>
				<button type="button" class="btn btn-primary rounded-pill px-4" id="btnSave-symptomes">
					<i class="bi bi-check2-circle me-1"></i>
					Enregistrer
				</button>
			</div>
		</form>
	</div>

</div>

 <script>
(function () {
  const $ = (id) => document.getElementById(id);
  function openDrawer(open){ $('drawer-symptomes').style.display = open ? 'block' : 'none'; }

  $('btnEdit-symptomes')?.addEventListener('click', () => {
    // le hub JS refresh + fillForm existe déjà via refreshAll() à l’ouverture modal,
    // mais ici on ouvre le drawer proprement
    openDrawer(true);
  });
  $('btnCancel-symptomes')?.addEventListener('click', () => openDrawer(false));
  $('btnSave-symptomes')?.addEventListener('click', async () => {
    // le hub JS gère saveSection('symptomes') via ses boutons.
    // Ici on déclenche juste l'event click du bouton hub si besoin (on l'a déjà)
    openDrawer(false);
  });
})();
</script>

