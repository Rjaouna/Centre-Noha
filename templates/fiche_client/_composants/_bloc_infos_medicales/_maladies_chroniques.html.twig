<div class="tab-pane fade" id="tab-maladies" role="tabpanel">

	<div class="section-head">
		<div>
			<div class="section-kicker text-danger">Section</div>
			<h5 class="section-title mb-0">Maladies chroniques</h5>
		</div>

		<div class="d-flex gap-2">
			<button class="btn btn-outline-danger rounded-pill px-3" type="button" id="btnEdit-maladies">
				<i class="bi bi-pencil-square me-1"></i>
				Modifier
			</button>
		</div>
	</div>

	<div class="section-card">
		<div class="fw-semibold mb-2">Résumé</div>
		<div class="chips" id="chips-maladies"></div>
		<div class="text-muted small mt-2" id="empty-maladies" style="display:none;">
			Aucune donnée. Clique sur “Modifier” pour compléter.
		</div>
	</div>

	<div class="edit-drawer" id="drawer-maladies" style="display:none;">
		<form id="form-maladies" class="edit-form">
			<div class="row g-3">
				{% set m = [
          ['diabetique','Diabète','bi-capsule', ['Oui','Non']],
          ['hypertendu','Hypertension','bi-heart-pulse', ['Oui','Non']],
          ['cholesterol','Cholestérol','bi-droplet', ['Oui','Non']],
          ['allergieNasale','Allergies nasales','bi-wind', ['Jamais','Parfois','Souvent']]
        ] %}

				{% for f in m %}
					<div class="col-md-6">
						<div class="choice-card">
							<div class="choice-card__title">
								<i class="bi {{ f[2] }} text-danger me-1"></i>
								{{ f[1] }}
							</div>
							<div class="choice-row">
								{% for opt in f[3] %}
									{% set id = 'maladies_' ~ f[0] ~ '_' ~ loop.index %}
									<input class="btn-check" type="radio" name="{{ f[0] }}" id="{{ id }}" value="{{ opt }}" autocomplete="off">
									<label class="btn btn-outline-danger rounded-pill px-3 py-2" for="{{ id }}">{{ opt }}</label>
								{% endfor %}
							</div>
						</div>
					</div>
				{% endfor %}

				<div class="col-12">
					<div class="choice-card">
						<div class="choice-card__title">
							<i class="bi bi-three-dots text-danger me-1"></i>
							Autre maladie
						</div>
						<textarea class="form-control rounded-4" name="autreMaladie" rows="3" placeholder="Ex: Asthme, etc..."></textarea>
					</div>
				</div>

			</div>

			<div class="edit-actions">
				<button type="button" class="btn btn-light rounded-pill px-4" id="btnCancel-maladies">Annuler</button>
				<button type="button" class="btn btn-danger rounded-pill px-4" id="btnSave-maladies">
					<i class="bi bi-check2-circle me-1"></i>
					Enregistrer
				</button>
			</div>
		</form>
	</div>

</div>

 <script>
(function () {
  const $ = (id) => document.getElementById(id);
  function openDrawer(open){ $('drawer-maladies').style.display = open ? 'block' : 'none'; }

  $('btnEdit-maladies')?.addEventListener('click', () => openDrawer(true));
  $('btnCancel-maladies')?.addEventListener('click', () => openDrawer(false));
  $('btnSave-maladies')?.addEventListener('click', () => openDrawer(false));
})();
</script>

