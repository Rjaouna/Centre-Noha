{% extends 'base.html.twig' %}

{% block title %}Suivi —
	{{ dossier.titre }}
{% endblock %}

{% block body %}

	<div
		class="container-fluid mt-4">

		<!-- ===== HEADER ===== -->
		<div class="card shadow-lg border-0 rounded-4 mb-4">
			<div class="card-body py-4 px-4">

				<div
					class="row align-items-center">

					<!-- TITRE -->
					<div class="col-12 col-md-8 d-flex align-items-center mb-3 mb-md-0">
						<i class="bi bi-journal-medical text-primary fs-1 me-3"></i>

						<div>
							<h2 class="fw-bold text-primary mb-1">Suivi médical du dossier</h2>

							<p class="text-muted mb-0">
								Dossier :
								<strong>{{ dossier.titre }}</strong>
								— 
								                            Patient :
								<strong>{{ patient.nom }}</strong>
							</p>
						</div>
					</div>

					<!-- BOUTONS -->
					<div class="col-12 col-md-4 d-flex justify-content-md-end justify-content-center gap-2">
<!-- Bouton Ajouter un suivi -->
<button class="btn btn-outline-primary btn-lg rounded-pill px-4 shadow-sm" data-bs-toggle="modal" data-bs-target="#modalAddSuivi">
	<i class="bi bi-clipboard-plus fs-4"></i>
	Nouveau suivi
</button>


						<a href="{{ path('app_dossier_medical_index', { id: patient.id }) }}" class="btn btn-outline-secondary btn-lg rounded-pill px-4 shadow-sm">
							<i class="bi bi-arrow-left"></i>
							Retour
						</a>

					</div>

				</div>

			</div>
		</div>

	</div>

{{ include('suivi_soin/_composant/_modal_ajouter_suivi.html.twig') }}


	<!-- ===== TABLEAU DES SUIVIS ===== -->
<div class="row g-4" id="cardsContainer">
	{% for suivi in suivis %}


		<div class="col-12 col-md-6 col-lg-4">
			<div
				class="card shadow-sm border-0 rounded-4 h-100">

				<!-- HEADER -->
				<div class="card-header bg-primary text-white rounded-top-4 d-flex align-items-center">
					<i class="bi bi-clipboard2-pulse fs-4 me-2"></i>
					<h5 class="mb-0 fw-bold">Diagnostic</h5>
				</div>

				<!-- BODY -->
				<div class="card-body">

					<p class="card-text text-secondary mb-3">
						{{ suivi.diagnostic }}
					</p>

					<div class="d-flex flex-column small text-muted">
						<span>
							<i class="bi bi-clock-history me-1"></i>
							Créé :
							<strong>{{ suivi.createdAt|date('d/m/Y H:i') }}</strong>
						</span>
					</div>

				</div>

				<!-- FOOTER -->
				<div class="card-footer bg-light d-flex justify-content-end gap-2 rounded-bottom-4">

					<a href="#" class="btn btn-outline-danger btn-sm rounded-pill shadow-sm">
						<i class="bi bi-trash"></i>
					</a>

				</div>

			</div>
		</div>

	{% else %}
		<div class="col-12">
			<div class="alert alert-info text-center rounded-pill py-3">
				Aucun suivi enregistré pour ce dossier.
			</div>
		</div>
	{% endfor %}
</div>



{% endblock %}

