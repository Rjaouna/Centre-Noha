{# templates/_partials/_app_menu.html.twig #}
{% if app.user %}
	{% set r = app.request.attributes.get('_route') %}

	{# ===========================
		   TOP APP BAR (minimal, app-like)
		=========================== #}
	<header class="app-topbar border-bottom sticky-top">
		<div class="container-fluid d-flex align-items-center justify-content-between py-2">

			<a href="{{ path('app_home') }}" class="app-brand d-flex align-items-center gap-2 text-decoration-none">
				<span class="brand-icon">
					<i class="bi bi-clipboard-pulse"></i>
				</span>

				<span class="brand-text">
					<span class="brand-name" id="logoName">Chargement‚Ä¶</span>
					<small class="brand-sub text-muted d-none d-sm-block">Cabinet</small>
				</span>
			</a>

			<div
				class="d-flex align-items-center gap-2">

				{# Notifications (ouvre modal) #}
				<button type="button" class="btn btn-icon-soft position-relative" data-bs-toggle="modal" data-bs-target="#notifModal" aria-label="Notifications">
					<i class="bi bi-bell-fill"></i>
					<span class="badge bg-danger badge-notif" id="notifTopBadge">0</span>
				</button>

				{# Profil : desktop dropdown / mobile offcanvas #}
				<div class="d-none d-lg-block dropdown">
					<button class="btn btn-user dropdown-toggle d-flex align-items-center gap-2" data-bs-toggle="dropdown" aria-expanded="false">
						<span class="d-none d-xl-inline fw-semibold">
							{{ app.user.nom ?? app.user.email }}
						</span>
						<img src="https://ui-avatars.com/api/?name={{ app.user.nom ?? app.user.email }}&background=0D8ABC&color=fff" class="rounded-circle" width="36" height="36" alt="avatar">
					</button>

					<ul class="dropdown-menu dropdown-menu-end shadow border-0 rounded-4 p-2">
						<li class="px-3 py-2">
							<div class="fw-bold">{{ app.user.email }}</div>
							<small class="text-muted">Compte m√©dical</small>
						</li>
						<li><hr class="my-2"></li>
						<li>
							<a class="dropdown-item rounded-3 d-flex align-items-center gap-2" href="{{ path('app_user_profile') }}">
								<i class="bi bi-person-circle"></i>
								Profil
							</a>
						</li>
						<li>
							<a class="dropdown-item rounded-3 d-flex align-items-center gap-2" href="{{ path('app_cabinet_index') }}">
								<i class="bi bi-gear"></i>
								Param√®tres
							</a>
						</li>
						<li><hr class="my-2"></li>
						<li>
							<a class="dropdown-item rounded-3 d-flex align-items-center gap-2 text-danger" href="{{ path('app_logout') }}">
								<i class="bi bi-box-arrow-right"></i>
								D√©connexion
							</a>
						</li>
					</ul>
				</div>

<button type="button" class="btn btn-icon-soft d-lg-none" data-bs-toggle="offcanvas" data-bs-target="#mobileMenuOffcanvas" aria-label="Menu">
	<i class="bi bi-three-dots-vertical"></i>
</button>



			</div>
		</div>
	</header>

	{# ===========================
		   DESKTOP SIDEBAR
		=========================== #}
	<aside class="app-sidebar d-none d-lg-flex">
		<div class="sidebar-inner">

			<div class="sidebar-user">
				<img src="https://ui-avatars.com/api/?name={{ app.user.nom ?? app.user.email }}&background=0D8ABC&color=fff" class="rounded-circle" width="44" height="44" alt="avatar">
				<div class="min-w-0">
					<div class="fw-bold text-truncate">{{ app.user.nom ?? app.user.email }}</div>
					<small class="text-muted text-truncate d-block">Compte m√©dical</small>
				</div>
			</div>

			<nav class="sidebar-nav mt-3">

				<a class="side-link {{ r == 'app_home' ? 'active' : '' }}" href="{{ path('app_home') }}">
					<i class="bi bi-house-door"></i>
					<span>Accueil</span>
				</a>

				<a class="side-link {{ r starts with 'app_fiche_client' ? 'active' : '' }}" href="{{ path('app_fiche_client_index') }}">
					<i class="bi bi-people"></i>
					<span>Patients</span>
				</a>

				<a class="side-link {{ r starts with 'rendezvous_calendrier' ? 'active' : '' }}" href="{{ path('rendezvous_calendrier') }}">
					<i class="bi bi-calendar3"></i>
					<span>Rendez-vous</span>
				</a>
<div class="side-section mt-3">

	<div class="side-section-title">
		<i class="bi bi-heart-pulse text-danger"></i>
		<span>R√©f m√©dical</span>
		<span class="side-section-badge">Configuration</span>
	</div>

	<div
		class="side-sublinks">

		{# ===== Parcours m√©dical ===== #}
		<a class="side-sublink {{ r == 'analyse_index' ? 'active' : '' }}" href="{{ path('analyse_index') }}">
			<span class="side-ico">
				<i class="bi bi-clipboard-data"></i>
			</span>
			<span>Analyses</span>
			<i class="bi bi-chevron-right ms-auto side-chevron"></i>
		</a>

		<a class="side-sublink {{ r == 'symptome_index' ? 'active' : '' }}" href="{{ path('symptome_index') }}">
			<span class="side-ico">
				<i class="bi bi-activity"></i>
			</span>
			<span>Sympt√¥mes</span>
			<i class="bi bi-chevron-right ms-auto side-chevron"></i>
		</a>

		<a class="side-sublink {{ r == 'maladie_chronique_index' ? 'active' : '' }}" href="{{ path('maladie_chronique_index') }}">
			<span class="side-ico">
				<i class="bi bi-heart-pulse"></i>
			</span>
			<span>Maladies chroniques</span>
			<i class="bi bi-chevron-right ms-auto side-chevron"></i>
		</a>

		<a class="side-sublink {{ r == 'traitement_index' ? 'active' : '' }}" href="{{ path('traitement_index') }}">
			<span class="side-ico">
				<i class="bi bi-capsule"></i>
			</span>
			<span>Traitements</span>
			<i class="bi bi-chevron-right ms-auto side-chevron"></i>
		</a>

		{# ===== Autres r√©f√©rentiels ===== #}
		<a class="side-sublink {{ r == 'certificats_index' ? 'active' : '' }}" href="{{ path('certificats_index') }}">
			<span class="side-ico">
				<i class="bi bi-file-medical"></i>
			</span>
			<span>Certificats</span>
			<i class="bi bi-chevron-right ms-auto side-chevron"></i>
		</a>

		<a class="side-sublink {{ r == 'disponibilite_index' ? 'active' : '' }}" href="{{ path('disponibilite_index') }}">
			<span class="side-ico">
				<i class="bi bi-calendar-check"></i>
			</span>
			<span>Disponibilit√©s</span>
			<i class="bi bi-chevron-right ms-auto side-chevron"></i>
		</a>

	</div>

</div>




			</nav>

<div class="sidebar-footer mt-4">
<a href="{{ path('app_logout') }}" class="btn btn-logout w-100  shadow-sm">

		<i class="bi bi-box-arrow-right me-2"></i>
		D√©connexion
	</a>
</div>


		</div>
	</aside>

{# ===========================
   OFFCANVAS: Menu Mobile (remplace le bottom nav)
=========================== #}
<div class="offcanvas offcanvas-end app-offcanvas d-lg-none" tabindex="-1" id="mobileMenuOffcanvas">
	<div class="offcanvas-header border-0">
		<div class="d-flex align-items-center gap-3">
			<img src="https://ui-avatars.com/api/?name={{ app.user.nom ?? app.user.email }}&background=0D8ABC&color=fff" class="rounded-circle" width="48" height="48" alt="avatar">
			<div class="min-w-0">
				<div class="fw-bold text-truncate">{{ app.user.nom ?? app.user.email }}</div>
				<small class="text-muted text-truncate d-block">{{ app.user.email }}</small>
			</div>
		</div>
		<button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
	</div>

	<div
		class="offcanvas-body pt-2">

		{# üîπ Navigation principale (ce que tu avais en bas) #}
		<div class="mm-section-title">
			<i class="bi bi-compass"></i>
			<span>Navigation</span>
		</div>

		<div class="mm-grid">
			<a class="mm-tile {{ r == 'app_home' ? 'active' : '' }}" href="{{ path('app_home') }}">
				<span class="mm-icon">
					<i class="bi bi-house-door"></i>
				</span>
				<span class="mm-label">Accueil</span>
			</a>

			<a class="mm-tile {{ r starts with 'app_fiche_client' ? 'active' : '' }}" href="{{ path('app_fiche_client_index') }}">
				<span class="mm-icon">
					<i class="bi bi-people"></i>
				</span>
				<span class="mm-label">Patients</span>
			</a>

			<a class="mm-tile {{ r starts with 'rendezvous_calendrier' ? 'active' : '' }}" href="{{ path('rendezvous_calendrier') }}">
				<span class="mm-icon">
					<i class="bi bi-calendar3"></i>
				</span>
				<span class="mm-label">RDV</span>
			</a>

		</div>

		<hr
		class="my-3">

		{# üîπ R√©f√©rentiel (acc√®s rapides) #}
		<div class="mm-section-title">
			<i class="bi bi-heart-pulse text-danger"></i>
			<span>R√©f√©rentiel m√©dical</span>
		</div>
<div class="mm-list">

	<a class="mm-row {{ r == 'analyse_index' ? 'active' : '' }}" href="{{ path('analyse_index') }}">
		<i class="bi bi-clipboard-data"></i>
		<div class="d-flex flex-column">
			<span class="fw-bold">Programmer les analyses</span>
			<small class="text-muted">
				D√©finir les analyses disponibles lors de la saisie des consultations
			</small>
		</div>
		<i class="bi bi-chevron-right ms-auto"></i>
	</a>

<div class="mm-card mm-card-pathway">

	<div class="mm-card-header">
		<i class="bi bi-diagram-3"></i>
		<span>Parcours m√©dical</span>
	</div>

	

	<div class="mm-list">

		<a class="mm-row {{ r == 'symptome_index' ? 'active' : '' }}" href="{{ path('symptome_index') }}">
			<i class="bi bi-activity"></i>
			<div class="d-flex flex-column">
				<span class="fw-bold">1. D√©clarer les sympt√¥mes</span>
				<small class="text-muted">Identifier ce que le patient ressent</small>
			</div>
			<i class="bi bi-arrow-down-short ms-auto text-muted"></i>
		</a>

		<a class="mm-row {{ r == 'maladie_chronique_index' ? 'active' : '' }}" href="{{ path('maladie_chronique_index') }}">
			<i class="bi bi-heart-pulse"></i>
			<div class="d-flex flex-column">
<span class="fw-bold">2. D√©clarer une maladie chronique</span>

				<small class="text-muted">Relier les sympt√¥mes √† une pathologie</small>
			</div>
			<i class="bi bi-arrow-down-short ms-auto text-muted"></i>
		</a>

		<a class="mm-row {{ r == 'traitement_index' ? 'active' : '' }}" href="{{ path('traitement_index') }}">
			<i class="bi bi-capsule"></i>
			<div class="d-flex flex-column">
				<span class="fw-bold">3. D√©finir le traitement</span>
				<small class="text-muted">Attribuer un m√©dicament adapt√©</small>
			</div>
			<i class="bi bi-chevron-right ms-auto"></i>
		</a>

	</div>
</div>



	<a class="mm-row {{ r == 'certificats_index' ? 'active' : '' }}" href="{{ path('certificats_index') }}">
		<i class="bi bi-file-medical"></i>
		<div class="d-flex flex-column">
			<span class="fw-bold">Mod√®les de certificats</span>
			<small class="text-muted">
				Pr√©parer les certificats m√©dicaux g√©n√©r√©s automatiquement
			</small>
		</div>
		<i class="bi bi-chevron-right ms-auto"></i>
	</a>

	<a class="mm-row {{ r == 'disponibilite_index' ? 'active' : '' }}" href="{{ path('disponibilite_index') }}">
		<i class="bi bi-calendar-check"></i>
		<div class="d-flex flex-column">
			<span class="fw-bold">D√©finir les disponibilit√©s</span>
			<small class="text-muted">
				G√©rer les cr√©neaux de rendez-vous propos√©s aux patients
			</small>
		</div>
		<i class="bi bi-chevron-right ms-auto"></i>
	</a>

</div>


		<hr
		class="my-3">

		{# üîπ Compte (Plus) #}
		<div class="mm-section-title">
			<i class="bi bi-person"></i>
			<span>Compte</span>
		</div>

<div class="menu-actions">
	<a href="{{ path('app_user_profile') }}" class="menu-btn">
		<span class="menu-ico menu-ico-primary">
			<i class="bi bi-person-circle"></i>
		</span>
		<span class="menu-text">
			<span class="menu-title">Profil</span>
			<small class="menu-sub">Informations personnelles</small>
		</span>
		<span class="menu-arrow">
			<i class="bi bi-chevron-right"></i>
		</span>
	</a>

	<a href="{{ path('app_cabinet_index') }}" class="menu-btn">
		<span class="menu-ico menu-ico-dark">
			<i class="bi bi-gear"></i>
		</span>
		<span class="menu-text">
			<span class="menu-title">Param√®tres</span>
			<small class="menu-sub">Cabinet & configuration</small>
		</span>
		<span class="menu-arrow">
			<i class="bi bi-chevron-right"></i>
		</span>
	</a>

	<a href="{{ path('app_logout') }}" class="menu-btn menu-btn-danger mt-1">
		<span class="menu-ico menu-ico-danger">
			<i class="bi bi-box-arrow-right"></i>
		</span>
		<span class="menu-text">
			<span class="menu-title">D√©connexion</span>
			<small class="menu-sub">Fermer la session</small>
		</span>
		<span class="menu-arrow">
			<i class="bi bi-chevron-right"></i>
		</span>
	</a>
</div>


	</div>
</div>


	{# ===========================
		   OFFCANVAS: R√©f√©rentiel (mobile)
		=========================== #}
	<div class="offcanvas offcanvas-bottom app-offcanvas rounded-top-4" tabindex="-1" id="refOffcanvas">
		<div class="offcanvas-header border-0 pb-0">
			<div class="d-flex align-items-center gap-2">
				<div class="offcanvas-icon bg-danger-subtle text-danger">
					<i class="bi bi-heart-pulse"></i>
				</div>
				<div>
					<div class="fw-bold">R√©f√©rentiel m√©dical</div>
					<small class="text-muted">Acc√®s rapide</small>
				</div>
			</div>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
		</div>

		<div class="offcanvas-body pt-3">
			<div class="list-group list-group-flush">
				<a class="list-group-item rounded-4 mb-2 shadow-sm border-0 d-flex align-items-center gap-2" href="{{ path('symptome_index') }}">
					<i class="bi bi-activity text-primary"></i>
					Sympt√¥mes
				</a>

				<a class="list-group-item rounded-4 mb-2 shadow-sm border-0 d-flex align-items-center gap-2" href="{{ path('traitement_index') }}">
					<i class="bi bi-capsule text-success"></i>
					Traitements
				</a>

				<a class="list-group-item rounded-4 mb-2 shadow-sm border-0 d-flex align-items-center gap-2" href="{{ path('maladie_chronique_index') }}">
					<i class="bi bi-heart-pulse text-danger"></i>
					Maladies chroniques
				</a>

				<a class="list-group-item rounded-4 mb-2 shadow-sm border-0 d-flex align-items-center gap-2" href="{{ path('certificats_index') }}">
					<i class="bi bi-file-medical text-secondary"></i>
					Certificats
				</a>

				<a class="list-group-item rounded-4 mb-2 shadow-sm border-0 d-flex align-items-center gap-2" href="{{ path('disponibilite_index') }}">
					<i class="bi bi-calendar-check text-primary"></i>
					Disponibilit√©s
				</a>
			</div>
		</div>
	</div>

	{# ===========================
		   OFFCANVAS: Plus (mobile)
		=========================== #}
	<div class="offcanvas offcanvas-end app-offcanvas" tabindex="-1" id="moreOffcanvas">
		<div class="offcanvas-header border-0">
			<div class="d-flex align-items-center gap-3">
				<img src="https://ui-avatars.com/api/?name={{ app.user.nom ?? app.user.email }}&background=0D8ABC&color=fff" class="rounded-circle" width="48" height="48" alt="avatar">
				<div class="min-w-0">
					<div class="fw-bold text-truncate">{{ app.user.nom ?? app.user.email }}</div>
					<small class="text-muted text-truncate d-block">{{ app.user.email }}</small>
				</div>
			</div>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
		</div>

		<div class="offcanvas-body">
			<div class="d-grid gap-2">
				<a href="{{ path('app_user_profile') }}" class="btn btn-light rounded-pill text-start px-4">
					<i class="bi bi-person-circle me-2"></i>
					Profil
				</a>
				<a href="{{ path('app_cabinet_index') }}" class="btn btn-light rounded-pill text-start px-4">
					<i class="bi bi-gear me-2"></i>
					Param√®tres
				</a>

				<hr class="my-2">

				<a href="{{ path('app_logout') }}" class="btn btn-danger rounded-pill px-4">
					<i class="bi bi-box-arrow-right me-2"></i>
					D√©connexion
				</a>
			</div>
		</div>
	</div>

	{# ===========================
		   MODAL NOTIFICATIONS (inchang√©)
		=========================== #}
	<div class="modal fade" id="notifModal" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-scrollable">
			<div class="modal-content shadow-lg border-0 rounded-4">

				<div class="modal-header bg-primary text-white rounded-top-4 border-0">
					<h5 class="modal-title fw-bold">
						<i class="bi bi-bell-fill me-2"></i>Centre des notifications
					</h5>
					<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
				</div>

				<div class="modal-body">

					<h6 class="fw-bold text-primary mb-3">
						<i class="bi bi-person-plus-fill me-2"></i>
						Nouveaux inscrits
					</h6>
					<div id="notifClientsList" class="vstack gap-3"></div>

					<hr class="my-4">

					<h6 class="fw-bold text-success mb-3">
						<i class="bi bi-calendar-check-fill me-2"></i>
						RDV du jour
					</h6>
					<div id="notifRdvList" class="vstack gap-3"></div>

				</div>

				<div class="modal-footer border-0">
					<button class="btn btn-light rounded-pill px-4" data-bs-dismiss="modal">Fermer</button>
				</div>

			</div>
		</div>
	</div>

 <script>
/* =============================
   CABINET NAME (LOGO)
============================= */
async function majLogo() {
    const el = document.getElementById('logoName');
    if (!el) return;

    const url = "{{ path('app_nom_cabinet') }}";

    el.textContent = "Chargement‚Ä¶";

    try {
        const response = await fetch(url);
        if (!response.ok) {
            el.textContent = "Erreur serveur";
            return;
        }

        const data = await response.json();

        if (!data.nom || data.nom === "null") {
            el.textContent = "Cabinet non configur√©";
        } else {
            el.textContent = data.nom;
        }
    } catch (e) {
        console.error(e);
        el.textContent = "Erreur r√©seau";
    }
}

/* =============================
   NOTIFICATIONS (CLIENTS + BADGE)
============================= */
const NOTIF_URL = "{{ path('api_notifications_feeds') }}";

function renderClientCard(c) {
    return `
        <div class="notify-card">
            <div class="notify-left">
                <div class="notify-title">
                    <i class="bi bi-person-circle text-primary me-1"></i>
                    ${c.nom} ‚Ä¢ ${c.ville}
                </div>
                <div class="notify-sub">
                    üìû ${c.telephone}<br>
                    üïí ${c.createdAt}
                </div>
            </div>
            <a href="/fiche/client/${c.id}"
               class="btn btn-sm btn-outline-primary fw-bold rounded-pill px-3">
                Voir
            </a>
        </div>
    `;
}

async function loadNotifications() {
    try {
        const res = await fetch(NOTIF_URL);
        if (!res.ok) return;

        const data = await res.json();

        // Badge top
        const topBadge = document.getElementById('notifTopBadge');
if (topBadge) {
    const clientsCount = data.newClients ? data.newClients.length : 0;
    const rdvCount = data.rdvToday ? data.rdvToday.length : 0;

    const total = clientsCount + rdvCount;

    topBadge.textContent = total;
    topBadge.style.display = total > 0 ? 'inline-flex' : 'none';
}


        // Clients
        const clientsContainer = document.getElementById('notifClientsList');
        if (clientsContainer) {
            clientsContainer.innerHTML =
                data.newClients && data.newClients.length
                    ? data.newClients.map(renderClientCard).join('')
                    : `
                        <div class="alert alert-light text-center py-2 mb-0 rounded-4">
                            Aucun nouveau patient
                        </div>
                    `;
        }

    } catch (e) {
        console.error(e);
    }
}

/* =============================
   RDV DU JOUR (BONNE ROUTE)
============================= */
const RDV_URL = "{{ path('api_rendezvous_list') }}";

function renderRdvCard(r) {
    return `
        <div class="notify-card ${r.isLate ? 'rdv-expired' : ''}">
            <div class="notify-left">
                <div class="notify-title">
                    <i class="bi bi-clock-fill text-success me-1"></i>
                    ${r.heureDebut} ‚Äì ${r.heureFin} ‚Äî ${r.nom}
                </div>
                <div class="notify-sub">
                    üìÖ ${r.date}<br>
                    ${
                        r.isLate
                            ? `<span class="badge bg-danger badge-status">Rendez-vous rat√©</span>`
                            : `<span class="badge bg-success badge-status">√Ä venir</span>`
                    }
                </div>
            </div>
            
        </div>
    `;
}

async function loadRdvToday() {
    try {
        const res = await fetch(RDV_URL);
        if (!res.ok) return;

        const rdvs = await res.json();
        const container = document.getElementById('notifRdvList');
        if (!container) return;

        container.innerHTML = rdvs.length
            ? rdvs.map(renderRdvCard).join('')
            : `
                <div class="alert alert-light text-center py-2 mb-0 rounded-4">
                    Aucun RDV aujourd‚Äôhui
                </div>
            `;
    } catch (e) {
        console.error(e);
    }
}

/* =============================
   INIT
============================= */
document.addEventListener('DOMContentLoaded', () => {
    majLogo();
    loadNotifications();
    loadRdvToday();

    setInterval(() => {
        loadNotifications();
        loadRdvToday();
    }, 30000);
});
</script>




<style>
/* ===== Carte parcours m√©dical ===== */
.mm-card-pathway{
	border: 1px solid rgba(13,110,253,.16);
	background: rgba(13,110,253,.04);
	border-radius: 20px;
	padding: 14px;
	box-shadow: 0 12px 28px rgba(13,110,253,.08);
	margin-bottom: 18px;
}

.mm-card-header{
	display: flex;
	align-items: center;
	gap: 10px;
	font-weight: 900;
	color: #0d6efd;
	margin-bottom: 6px;
}

.mm-card-header i{
	font-size: 1.2rem;
}

.mm-card-desc{
	font-size: .82rem;
	color: #6b7280;
	margin-bottom: 12px;
}

/* S√©paration visuelle interne */
.mm-card-pathway .mm-row{
	background: #fff;
}

.mm-card-pathway .mm-row + .mm-row{
	margin-top: 6px;
}

	/* Container sublinks (petit cadre) */
	.side-sublinks {
		display: grid;
		gap: 10px;
		padding: 10px;
		border-radius: 18px;
		background: rgba(17, 24, 39, 0.02);
		border: 1px solid rgba(0, 0, 0, .06);
	}

	/* Titre section + badge */
	.side-section-badge {
		margin-left: auto;
		font-size: 0.72rem;
		font-weight: 800;
		padding: 0.22rem 0.55rem;
		border-radius: 999px;
		background: rgba(220, 53, 69, .10);
		color: #dc3545;
		border: 1px solid rgba(220, 53, 69, .16);
	}

	/* Lien */
	.side-sublink {
		display: flex;
		align-items: center;
		gap: 10px;
		padding: 12px;
		border-radius: 16px;
		text-decoration: none;
		color: #111827;
		font-weight: 800;
		background: #fff;
		border: 1px solid rgba(0, 0, 0, .06);
		box-shadow: 0 10px 22px rgba(0, 0, 0, .05);
		transition: 0.18s ease;
	}

	.side-sublink:hover {
		transform: translateY(-1px);
		box-shadow: 0 16px 34px rgba(0, 0, 0, .08);
		border-color: rgba(13, 110, 253, .14);
		background: rgba(13, 110, 253, .03);
	}

	/* Petit bloc ic√¥ne */
	.side-ico {
		width: 34px;
		height: 34px;
		border-radius: 12px;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		background: rgba(13, 110, 253, .10);
		color: #0d6efd;
		box-shadow: inset 0 0 0 1px rgba(13, 110, 253, .12);
		flex: 0 0 auto;
	}
	.side-ico i {
		font-size: 1.05rem;
	}

	/* Chevron */
	.side-chevron {
		opacity: .55;
		font-size: 0.95rem;
	}

	/* Active */
	.side-sublink.active {
		background: rgba(13, 110, 253, .10);
		border-color: rgba(13, 110, 253, .22);
	}
	.side-sublink.active .side-ico {
		background: rgba(13, 110, 253, .16);
		box-shadow: inset 0 0 0 1px rgba(13, 110, 253, .20);
	}
	.side-sublink.active .side-chevron {
		opacity: 1;
		color: #0d6efd;
	}

	/* Option : couleurs diff√©rentes par item (si tu veux) */
	.side-sublink:nth-child(2) .side-ico {
		background: rgba(220, 53, 69, .10);
		color: #dc3545;
		box-shadow: inset 0 0 0 1px rgba(220, 53, 69, .12);
	}
	.side-sublink:nth-child(3) .side-ico {
		background: rgba(108, 117, 125, .10);
		color: #6c757d;
		box-shadow: inset 0 0 0 1px rgba(108, 117, 125, .12);
	}
	.side-sublink:nth-child(4) .side-ico {
		background: rgba(25, 135, 84, .10);
		color: #198754;
		box-shadow: inset 0 0 0 1px rgba(25, 135, 84, .12);
	}
	.side-sublink:nth-child(5) .side-ico {
		background: rgba(13, 110, 253, .10);
		color: #0d6efd;
		box-shadow: inset 0 0 0 1px rgba(13, 110, 253, .12);
	}
</style>

	{# ===========================
		   STYLE (App look)
		=========================== #}
	<style>
		/* Layout spacing for app feeling */
		@media(min-width: 992px) {
			body {
				padding-left: 270px;
			}
		}
		@media(max-width: 991.98px) {
	body { padding-bottom: 0; } /* ‚úÖ plus de menu bottom */
}
/* ===== Mobile menu (offcanvas) ===== */
.mm-section-title{
	display:flex;
	align-items:center;
	gap:10px;
	font-weight:900;
	color:#111827;
	margin-bottom:10px;
}

.mm-grid{
	display:grid;
	grid-template-columns: 1fr 1fr;
	gap: 10px;
	margin-bottom: 6px;
}

.mm-tile{
	background:#fff;
	border:1px solid rgba(0,0,0,.06);
	border-radius:18px;
	padding:12px;
	display:flex;
	align-items:center;
	gap:10px;
	text-decoration:none;
	color:#111827;
	box-shadow:0 10px 26px rgba(0,0,0,.06);
	transition:.18s ease;
}
.mm-tile:hover{ transform: translateY(-1px); }
.mm-tile.active{
	border-color: rgba(13,110,253,.25);
	background: rgba(13,110,253,.06);
}

.mm-icon{
	width:40px;
	height:40px;
	border-radius:14px;
	display:inline-flex;
	align-items:center;
	justify-content:center;
	background: rgba(13,110,253,.10);
	color:#0d6efd;
	box-shadow: inset 0 0 0 1px rgba(13,110,253,.12);
	flex:0 0 auto;
}
.mm-label{ font-weight:900; }

.mm-list{ display:grid; gap:8px; }
.mm-row{
	display:flex;
	align-items:center;
	gap:10px;
	padding:12px 14px;
	border-radius:16px;
	background:#fff;
	border:1px solid rgba(0,0,0,.06);
	text-decoration:none;
	color:#111827;
	box-shadow:0 10px 26px rgba(0,0,0,.06);
	transition:.18s ease;
}
.mm-row:hover{
	background: rgba(13,110,253,.06);
	border-color: rgba(13,110,253,.14);
}
.mm-row i:first-child{
	color:#0d6efd;
	font-size:1.1rem;
}
.mm-row.active{
	background: rgba(13,110,253,.10);
	border-color: rgba(13,110,253,.20);
}


		/* Topbar */
		.app-topbar {
			background: rgba(255, 255, 255, .92);
			backdrop-filter: blur(10px);
		}
		.app-brand .brand-icon {
			width: 42px;
			height: 42px;
			border-radius: 14px;
			display: flex;
			align-items: center;
			justify-content: center;
			background: rgba(13, 110, 253, .10);
			color: #0d6efd;
			font-size: 1.25rem;
			box-shadow: inset 0 0 0 1px rgba(13, 110, 253, .12);
		}
		.brand-text {
			line-height: 1.1;
		}
		.brand-name{
font-family: ui-rounded, "SF Pro Rounded", "Segoe UI Rounded", "Avenir Next", "Poppins", "Montserrat", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;

  font-weight: 950;
  font-size: 1.45rem;
letter-spacing: .02em;


background: linear-gradient(90deg, #1d4ed8, #2563eb);

  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;

  text-shadow: 0 10px 24px rgba(13,110,253,.12);
}

		.brand-sub {
			font-size: 0.78rem;
		}

		.btn-icon-soft {
			
			border-radius: 14px;
			background: #fff;
			display: flex;
			align-items: center;
			justify-content: center;
			box-shadow: 0 10px 26px rgba(0, 0, 0, .06);
		}
		.btn-icon-soft i {
			font-size: 1.1rem;
			color: #111827;
		}
		.badge-notif {
			position: absolute;
			top: -6px;
			right: -6px;
			font-size: 0.70rem;
			border-radius: 999px;
			padding: 0.25rem 0.45rem;
		}

		.btn-user {
			background: #fff;
			border-radius: 999px;
			box-shadow: 0 10px 26px rgba(0, 0, 0, .06);
		}

		/* Sidebar */
		.app-sidebar {
			position: fixed;
			top: 0;
			left: 0;
			width: 270px;
			height: 100vh;
			background: #ffffff;
			border-right: 1px solid rgba(0, 0, 0, .06);
			z-index: 1029;
		}
		.sidebar-inner {
			height: calc(100vh - 64px);
			display: flex;
			flex-direction: column;
			padding: 16px;
		}
		.sidebar-user {
			display: flex;
			gap: 12px;
			align-items: center;
			padding: 12px;
			border-radius: 18px;
			background: rgba(13, 110, 253, .06);
			border: 1px solid rgba(13, 110, 253, .10);
		}
		.sidebar-nav .side-link,
		.sidebar-nav .side-sublink {
			display: flex;
			align-items: center;
			gap: 12px;
			padding: 8px 5px;
			border-radius: 16px;
			text-decoration: none;
			color: #111827;
			font-weight: 700;
			margin-bottom: 5px;
			transition: 0.18s ease;
			border: 1px solid transparent;
		}
		.sidebar-nav .side-link i,
		.sidebar-nav .side-sublink i {
			font-size: 1.15rem;
			color: #0d6efd;
		}
		.sidebar-nav .side-link:hover,
		.sidebar-nav .side-sublink:hover {
			background: rgba(13, 110, 253, .06);
			border-color: rgba(13, 110, 253, .12);
			transform: translateX(2px);
		}
		.sidebar-nav .active {
			background: rgba(13, 110, 253, .10);
			border-color: rgba(13, 110, 253, .18);
		}

		.side-section-title {
			display: flex;
			align-items: center;
			gap: 10px;
			font-weight: 900;
			color: #111827;
			padding: 10px 12px;
			border-radius: 16px;
			background: rgba(220, 53, 69, .06);
			border: 1px solid rgba(220, 53, 69, .10);
			margin-bottom: 10px;
		}
		.sidebar-footer .side-link.muted {
			font-weight: 700;
			color: #374151;
			background: #f3f4f6;
		}
		.sidebar-footer .side-link.muted i {
			color: #6b7280;
		}

		/* Bottom nav */
		.app-bottom-nav {
			position: fixed;
			left: 0;
			right: 0;
			bottom: 0;
			height: 68px;
			background: rgba(255, 255, 255, .94);
			backdrop-filter: blur(10px);
			border-top: 1px solid rgba(0, 0, 0, .06);
			display: flex;
			justify-content: space-around;
			align-items: center;
			z-index: 1030;
			padding: 6px 10px;
		}
		.bn-item {
			width: 20%;
			border: 0;
			background: transparent;
			text-decoration: none;
			color: #6b7280;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			gap: 4px;
			font-weight: 800;
			font-size: 0.72rem;
		}
		.bn-item i {
			font-size: 1.25rem;
			color: #111827;
			opacity: .75;
		}
		.bn-item.active {
			color: #0d6efd;
		}
		.bn-item.active i {
			color: #0d6efd;
			opacity: 1;
		}

		/* Offcanvas */
		.app-offcanvas .offcanvas-header {
			padding: 16px 16px 6px;
		}
		.app-offcanvas .offcanvas-body {
			padding: 16px;
		}

		.offcanvas-icon {
			width: 44px;
			height: 44px;
			border-radius: 16px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.2rem;
		}
		.btn-logout{
    border-radius: 999px;
    padding: 12px 16px;
    font-weight: 800;
    letter-spacing: .2px;

    background: rgba(220,53,69,.10);
    border: 1px solid rgba(220,53,69,.22);
    color: #dc3545;

    box-shadow: 0 10px 26px rgba(0,0,0,.08);
    transition: .18s ease;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    text-decoration:none;
  }

  .btn-logout:hover{
    background: rgba(220,53,69,.14);
    border-color: rgba(220,53,69,.30);
    transform: translateY(-2px);
    box-shadow: 0 16px 36px rgba(0,0,0,.12);
    color: #dc3545;
  }

  .btn-logout:active{
    transform: translateY(0);
    box-shadow: 0 10px 26px rgba(0,0,0,.08);
  }

  .menu-actions{
		display: grid;
		gap: 10px;
	}

	/* Bouton "card" */
	.menu-btn{
		width: 100%;
		border: 1px solid rgba(0,0,0,.06);
		border-radius: 18px;
		padding: 12px 14px;
		background: #fff;
		text-decoration: none;
		color: #111827;

		display: flex;
		align-items: center;
		gap: 12px;

		box-shadow: 0 10px 26px rgba(0,0,0,.06);
		transition: .18s ease;
	}

	.menu-btn:hover{
		transform: translateY(-2px);
		box-shadow: 0 16px 36px rgba(0,0,0,.10);
		background: #f9fbff;
	}

	.menu-ico{
		width: 44px;
		height: 44px;
		border-radius: 16px;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		font-size: 1.25rem;
		flex: 0 0 auto;
		box-shadow: inset 0 0 0 1px rgba(0,0,0,.06);
	}

	.menu-ico-primary{ background: rgba(13,110,253,.10); color:#0d6efd; }
	.menu-ico-dark{ background: rgba(17,24,39,.06); color:#111827; }
	.menu-ico-danger{ background: rgba(220,53,69,.10); color:#dc3545; }

	.menu-text{ flex: 1; min-width: 0; }
	.menu-title{ font-weight: 900; display:block; line-height: 1.1; }
	.menu-sub{ color:#6b7280; display:block; margin-top: 2px; }

	.menu-arrow{
		width: 34px;
		height: 34px;
		border-radius: 12px;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		background: rgba(0,0,0,.04);
		color: #6b7280;
		flex: 0 0 auto;
	}

	/* Variante d√©connexion */
	.menu-btn-danger{
		border-color: rgba(220,53,69,.16);
	}
	.menu-btn-danger:hover{
		background: rgba(220,53,69,.06);
		border-color: rgba(220,53,69,.26);
	}

	@media (max-width: 576px){
		.menu-btn{ padding: 12px; }
		.menu-title{ font-size: .98rem; }
	}

		
.notify-card {
	border: 1px solid rgba(0, 0, 0, 0.08);
	border-radius: 16px;
	background: #fff;
	padding: 14px 16px;
	display: flex;
	justify-content: space-between;
	align-items: center;
	box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
	transition: 0.18s ease;
}
.notify-card:hover {
	transform: translateY(-2px);
	box-shadow: 0 12px 30px rgba(0, 0, 0, 0.10);
	background: #f9fbff;
}
.notify-left {
	max-width: 75%;
}
.notify-title {
	font-weight: 800;
}
.notify-sub {
	font-size: 0.88rem;
	color: #6b7280;
}
.badge-status {
	font-size: 0.75rem;
	padding: 4px 10px;
	border-radius: 999px;
}
</style>{% endif %}

