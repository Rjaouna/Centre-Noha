{% extends 'base.html.twig' %}

{% block title %}Connexion ‚Äì Centre Noha
{% endblock %}

{% block body %}

	<style>
		/* ===== LOGIN CARD UX ===== */
.login-card{
  max-width: 900px;
  width: 100%;
  border-radius: 1.5rem;
  overflow: hidden;
  box-shadow: 0 18px 55px rgba(0,0,0,.10);
  border: 1px solid rgba(0,0,0,.06);
}

.login-left{
  padding: 2.5rem;
  background: rgba(255,255,255,.92);
}

.login-right{
  background: linear-gradient(180deg, rgba(13,110,253,.06), rgba(255,255,255,1));
}

/* Inputs premium */
.form-floating > .form-control{
  border-radius: 0.9rem !important;
  border: 1px solid rgba(0,0,0,.10);
  background: rgba(255,255,255,.92);
  padding-top: 1.3rem !important;
  padding-bottom: .55rem !important;
  transition: box-shadow .15s ease, border-color .15s ease, transform .08s ease;
}
.form-floating > .form-control:focus{
  border-color: rgba(99,102,241,.55);
  box-shadow: 0 0 0 .22rem rgba(99,102,241,.18);
  transform: translateY(-1px);
}
.form-floating label{ padding-left: .75rem; }

/* Bouton login premium */
#connexion{
  border: 0;
  background: linear-gradient(90deg, rgba(13,110,253,1) 0%, rgba(99,102,241,1) 100%);
  box-shadow: 0 14px 34px rgba(13,110,253,.22);
  transition: transform .12s ease, box-shadow .18s ease, filter .18s ease;
}
#connexion:hover{
  transform: translateY(-1px);
  box-shadow: 0 18px 44px rgba(13,110,253,.26);
  filter: brightness(1.02);
}

/* Admin info box plus clean */
.admin-box{
  background: rgba(13,110,253,.06);
  border: 1px solid rgba(13,110,253,.12);
  padding: 14px;
  border-radius: 14px;
}
.admin-link .bi-chevron-down{
  transition: transform .18s ease;
}
.admin-link[aria-expanded="true"] .bi-chevron-down{
  transform: rotate(180deg);
}

/* ===== LOADER FULLSCREEN UX ===== */
.login-loader{
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,.92);
  backdrop-filter: blur(10px);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: 9999;
}

.loader-box{
  width: min(420px, 92vw);
  padding: 1.3rem 1.2rem;
  border-radius: 18px;
  background: rgba(255,255,255,.92);
  border: 1px solid rgba(0,0,0,.06);
  box-shadow: 0 18px 55px rgba(0,0,0,.10);
  text-align:center;
}

/* cercle */
.pulse-circle{
  width: 86px;
  height: 86px;
  border-radius: 50%;
  background: linear-gradient(135deg, #0d6efd, #6366f1);
  margin: 0 auto .9rem;
  box-shadow: 0 16px 38px rgba(13,110,253,.22);
}

/* mini progress */
.ux-mini-progress{
  height: 6px;
  background: rgba(13,110,253,.10);
  border-radius: 999px;
  overflow:hidden;
  margin: .6rem auto .75rem;
  width: 72%;
}
.ux-mini-progress > span{
  display:block;
  height:100%;
  width: 42%;
  background: linear-gradient(90deg, rgba(13,110,253,.65), rgba(99,102,241,1), rgba(13,110,253,.65));
  background-size: 200% 100%;
  animation: uxLoginShimmer 1.1s linear infinite;
  border-radius: 999px;
}
@keyframes uxLoginShimmer{
  0%{ background-position: 0 0; }
  100%{ background-position: 200% 0; }
}

.loader-text{
  font-weight: 800;
  color: #0d6efd;
  letter-spacing: .2px;
}

/* Responsive */
@media(max-width: 768px){
  .login-left{ padding: 1.5rem; }
  .login-card{ border-radius: 1rem; }
  .login-right{ display:none !important; }
}

	</style>
 <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>





	<div class="container d-flex justify-content-center align-items-center" style="min-height: 90vh;">
<div class="shadow-lg login-card">


			<div
				class="row g-0">

				<!-- LEFT : FORM -->
				<div class="col-md-6 login-left">

					<h2 class="text-primary fw-bold mb-4 d-flex align-items-center">
						<i class="bi bi-person-circle me-2"></i>
						Connexion
					</h2>
					{% if error %}
						<div class="alert alert-danger shadow-sm">
							<i class="bi bi-exclamation-triangle"></i>
							Identifiants incorrects
						</div>
					{% endif %}

					{{ form_start(form, { attr: { class: 'mb-3' } }) }}

					<!-- EMAIL -->
					<div class="form-floating mb-3">
						{{ form_widget(form.email, {
						attr: { 
							class: 'form-control rounded-3',
							placeholder: 'Adresse e-mail'
						}
					}) }}
						<label for="{{ form.email.vars.id }}">Adresse e-mail</label>
					</div>

					<!-- PASSWORD -->
					<div class="form-floating mb-3">
						{{ form_widget(form.password, {
						attr: { 
							class: 'form-control rounded-3',
							placeholder: 'Mot de passe'
						}
					}) }}
						<label for="{{ form.password.vars.id }}">Mot de passe</label>
					</div>

					{{ form_widget(form._csrf_token) }}

<button id="connexion" class="btn btn-primary w-100 rounded-pill py-2 fw-semibold shadow-sm">


						<i class="bi bi-box-arrow-in-right"></i>
						Se connecter
					</button>

					{{ form_end(form) }}

{# Admin #}
<p class="text-muted small mt-3 mb-2">
	<i class="bi bi-info-circle"></i>
	Vous n‚Äôavez pas de compte ?
</p>

</p>


</p></p><a class="admin-link text-primary fw-semibold text-decoration-none" data-bs-toggle="collapse" href="#adminInfo" role="button" aria-expanded="false" aria-controls="adminInfo">
Contacter l‚Äôadministrateur
<i class="bi bi-chevron-down ms-1"></i></a></p><div id="adminInfo" class="collapse"><div class="admin-box">
<p class="small mb-1">
	<i class="bi bi-person-badge-fill text-primary"></i>
	<strong>Administrateur :</strong>
	We Digit All
</p>
<p class="small mb-1">
	<i class="bi bi-telephone-fill text-primary"></i>
	+33 6 59 22 10 04
</p>
<p class="small mb-0">
	<i class="bi bi-envelope-fill text-primary"></i>
	contact@wedigitall.com
</p></div>


</div>


					<p class="text-center text-muted small mt-4">
						üîê Acc√®s r√©serv√© au personnel autoris√© du Centre Noha.
					</p>
				</div>
<!-- LOADER CONNEXION -->
<div id="loginLoader" class="login-loader d-none">
	<div class="loader-card">
		<div class="spinner"></div>
		<h5 class="fw-bold mt-3 text-primary">Connexion en cours‚Ä¶</h5>
		<p class="text-muted small mb-0">
			V√©rification de vos acc√®s s√©curis√©s
		</p>
	</div>
</div>



				<!-- RIGHT IMAGE -->
<div class="col-md-6 login-right d-none d-md-flex bg-white justify-content-center align-items-center">
<img src="{{ asset('assets/img/3736765.jpg') }}" class="img-fluid p-3" style="width: 80%;"/>

				</div>

			</div>
		</div>
	</div>
 <script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.querySelector("form");
  const loader = document.getElementById("loginLoader");
  const btn = document.getElementById("connexion");
  if (!form || !loader || !btn) return;

  form.addEventListener("submit", function () {

    // Affiche loader
    loader.classList.remove("d-none");

    // Lock bouton
    btn.disabled = true;
    btn.dataset.original = btn.innerHTML;
    btn.innerHTML = `<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Connexion...`;

    // Animations
    gsap.killTweensOf(".pulse-circle");
    gsap.killTweensOf(".loader-text");

    gsap.fromTo(".pulse-circle",
      { scale: 0.92, opacity: 0.75 },
      { scale: 1.08, opacity: 1, duration: 0.75, repeat: -1, yoyo: true, ease: "power1.inOut" }
    );

    gsap.fromTo(".loader-text",
      { opacity: 0.55 },
      { opacity: 1, duration: 0.9, repeat: -1, yoyo: true, ease: "power1.inOut" }
    );

    // ‚úÖ submit normal (PAS de d√©lai artificiel)
  });
});
</script>



{% endblock %}

