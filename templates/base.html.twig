<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>
			{% block title %}Welcome!
			{% endblock %}
		</title>

		<link rel="stylesheet" href="{{ asset('assets/css/bootstrap.css') }}">
		<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

		{% block stylesheets %}
			{{ encore_entry_link_tags('app') }}
		{% endblock %}
	</head>

	<body class="{% if app.request.attributes.get('_route') == 'app_home' %}home-bg{% endif %}">

		{{ include('partials/_navbar/_navbar.html.twig') }}

		{% for label, messages in app.flashes %}
			{% for message in messages %}
				<div class="alert alert-{{ label }} alert-dismissible fade show shadow-sm mt-3 mx-3">
					<strong>{{ message }}</strong>
					<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
				</div>
			{% endfor %}
		{% endfor %}

		<div id="flashMessageContainer" class="position-fixed top-0 start-50 translate-middle-x mt-3" style="z-index:9999;width:400px;"></div>

		{% block body %}{% endblock %}
{{ include('_partials/_popup.html.twig') }}

		 <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
		 <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
		 <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
		 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

			{% block javascripts %}
		{{ encore_entry_script_tags('app') }}
	{% endblock %}

 <script>
function showFlashError(message) {

    // üî• Cr√©ation du popup (DIV principal)
    const alert = document.createElement("div");

    alert.className = "alert alert-danger shadow-lg border-0 rounded-4 fade show";
    alert.style.width = "360px";
    alert.style.position = "fixed";
    alert.style.bottom = "20px";
    alert.style.right = "20px";
    alert.style.zIndex = "9999";

    // üß± Construction du contenu interne
    alert.innerHTML = `
        <div class="d-flex align-items-start">

            <i class="bi bi-exclamation-triangle-fill fs-1 text-white bg-danger p-2 rounded-circle me-3"></i>

            <div>
                <h5 class="fw-bold mb-1">Erreur lors de l'op√©ration ‚ùå</h5>

                <p class="mb-1">${message}</p>

                <small class="text-muted">Merci de r√©essayer ou de contacter le support.</small>
            </div>

            <button type="button" class="btn-close"></button>
        </div>
    `;

    // üìå Fermeture manuelle
    alert.querySelector(".btn-close").addEventListener("click", () => alert.remove());

    // üìå Ajout dans le body
    document.body.appendChild(alert);

    // ‚è≥ Fermeture automatique apr√®s 5 sec
    setTimeout(() => {
        alert.classList.remove("show");
        alert.classList.add("fade");
        setTimeout(() => alert.remove(), 800);
    }, 5000);
}
</script>



	</body>
</html>

